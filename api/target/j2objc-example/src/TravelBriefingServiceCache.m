//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kamartin/Desktop/Spikes/j2Objc/travelbriefing-api/api/src/main/java/com/totsp/travelbriefing/service/TravelBriefingServiceCache.java
//

#include "Country.h"
#include "J2ObjC_source.h"
#include "Observable.h"
#include "TravelBriefingServiceCache.h"
#include "com/google/common/cache/Cache.h"
#include "com/google/common/cache/CacheBuilder.h"
#include "java/io/PrintStream.h"
#include "java/lang/System.h"
#include "java/util/List.h"
#include "java/util/concurrent/TimeUnit.h"

inline NSString *TOTSPTravelBriefingServiceCache_get_CACHE_KEY_COUNTRYLIST();
static NSString *TOTSPTravelBriefingServiceCache_CACHE_KEY_COUNTRYLIST = @"clkk";
J2OBJC_STATIC_FIELD_OBJ_FINAL(TOTSPTravelBriefingServiceCache, CACHE_KEY_COUNTRYLIST, NSString *)

inline id<ComGoogleCommonCacheCache> TOTSPTravelBriefingServiceCache_get_CACHE_COUNTRY();
static id<ComGoogleCommonCacheCache> TOTSPTravelBriefingServiceCache_CACHE_COUNTRY;
J2OBJC_STATIC_FIELD_OBJ_FINAL(TOTSPTravelBriefingServiceCache, CACHE_COUNTRY, id<ComGoogleCommonCacheCache>)

inline id<ComGoogleCommonCacheCache> TOTSPTravelBriefingServiceCache_get_CACHE_COUNTRYLIST();
static id<ComGoogleCommonCacheCache> TOTSPTravelBriefingServiceCache_CACHE_COUNTRYLIST;
J2OBJC_STATIC_FIELD_OBJ_FINAL(TOTSPTravelBriefingServiceCache, CACHE_COUNTRYLIST, id<ComGoogleCommonCacheCache>)

J2OBJC_INITIALIZED_DEFN(TOTSPTravelBriefingServiceCache)

@implementation TOTSPTravelBriefingServiceCache

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  TOTSPTravelBriefingServiceCache_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (void)cacheCountryWithNSString:(NSString *)name
                withTOTSPCountry:(TOTSPCountry *)country {
  TOTSPTravelBriefingServiceCache_cacheCountryWithNSString_withTOTSPCountry_(name, country);
}

+ (void)cacheCountryListWithJavaUtilList:(id<JavaUtilList>)countries {
  TOTSPTravelBriefingServiceCache_cacheCountryListWithJavaUtilList_(countries);
}

- (RxObservable *)getCountries {
  [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:@"TravelBriefingServiceCache getCountries"];
  id<JavaUtilList> countries = [((id<ComGoogleCommonCacheCache>) nil_chk(TOTSPTravelBriefingServiceCache_CACHE_COUNTRYLIST)) getIfPresentWithId:TOTSPTravelBriefingServiceCache_CACHE_KEY_COUNTRYLIST];
  if (countries != nil) {
    [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:@"   CACHE HIT"];
    return RxObservable_justWithId_(countries);
  }
  return RxObservable_empty();
}

- (RxObservable *)getCountryWithNSString:(NSString *)countryName {
  [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:JreStrcat("$$", @"TravelBriefingServiceCache getCountry:", countryName)];
  TOTSPCountry *country = [((id<ComGoogleCommonCacheCache>) nil_chk(TOTSPTravelBriefingServiceCache_CACHE_COUNTRY)) getIfPresentWithId:countryName];
  if (country != nil) {
    [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:@"   CACHE HIT"];
    return RxObservable_justWithId_(country);
  }
  return RxObservable_empty();
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { "cacheCountryWithNSString:withTOTSPCountry:", "V", 0x9, 0, 1, -1, -1, -1, -1 },
    { "cacheCountryListWithJavaUtilList:", "V", 0x9, 2, 3, -1, 4, -1, -1 },
    { "getCountries", "LRxObservable;", 0x1, -1, -1, -1, 5, -1, -1 },
    { "getCountryWithNSString:", "LRxObservable;", 0x1, 6, 7, -1, 8, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "CACHE_KEY_COUNTRYLIST", "LNSString;", .constantValue.asLong = 0, 0x1a, -1, 9, -1, -1 },
    { "CACHE_COUNTRY", "LComGoogleCommonCacheCache;", .constantValue.asLong = 0, 0x1a, -1, 10, 11, -1 },
    { "CACHE_COUNTRYLIST", "LComGoogleCommonCacheCache;", .constantValue.asLong = 0, 0x1a, -1, 12, 13, -1 },
  };
  static const void *ptrTable[] = { "cacheCountry", "LNSString;LTOTSPCountry;", "cacheCountryList", "LJavaUtilList;", "(Ljava/util/List<Lcom/totsp/travelbriefing/model/CountryListItem;>;)V", "()Lrx/Observable<Ljava/util/List<Lcom/totsp/travelbriefing/model/CountryListItem;>;>;", "getCountry", "LNSString;", "(Ljava/lang/String;)Lrx/Observable<Lcom/totsp/travelbriefing/model/Country;>;", &TOTSPTravelBriefingServiceCache_CACHE_KEY_COUNTRYLIST, &TOTSPTravelBriefingServiceCache_CACHE_COUNTRY, "Lcom/google/common/cache/Cache<Ljava/lang/String;Lcom/totsp/travelbriefing/model/Country;>;", &TOTSPTravelBriefingServiceCache_CACHE_COUNTRYLIST, "Lcom/google/common/cache/Cache<Ljava/lang/String;Ljava/util/List<Lcom/totsp/travelbriefing/model/CountryListItem;>;>;" };
  static const J2ObjcClassInfo _TOTSPTravelBriefingServiceCache = { "TravelBriefingServiceCache", "com.totsp.travelbriefing.service", ptrTable, methods, fields, 7, 0x0, 5, 3, -1, -1, -1, -1, -1 };
  return &_TOTSPTravelBriefingServiceCache;
}

+ (void)initialize {
  if (self == [TOTSPTravelBriefingServiceCache class]) {
    TOTSPTravelBriefingServiceCache_CACHE_COUNTRY = [((ComGoogleCommonCacheCacheBuilder *) nil_chk([((ComGoogleCommonCacheCacheBuilder *) nil_chk([((ComGoogleCommonCacheCacheBuilder *) nil_chk([((ComGoogleCommonCacheCacheBuilder *) nil_chk(ComGoogleCommonCacheCacheBuilder_newBuilder())) maximumSizeWithLong:100])) recordStats])) expireAfterWriteWithLong:10 withJavaUtilConcurrentTimeUnit:JreLoadEnum(JavaUtilConcurrentTimeUnit, MINUTES)])) build];
    TOTSPTravelBriefingServiceCache_CACHE_COUNTRYLIST = [((ComGoogleCommonCacheCacheBuilder *) nil_chk([((ComGoogleCommonCacheCacheBuilder *) nil_chk([((ComGoogleCommonCacheCacheBuilder *) nil_chk([((ComGoogleCommonCacheCacheBuilder *) nil_chk(ComGoogleCommonCacheCacheBuilder_newBuilder())) maximumSizeWithLong:1])) recordStats])) expireAfterWriteWithLong:10 withJavaUtilConcurrentTimeUnit:JreLoadEnum(JavaUtilConcurrentTimeUnit, MINUTES)])) build];
    J2OBJC_SET_INITIALIZED(TOTSPTravelBriefingServiceCache)
  }
}

@end

void TOTSPTravelBriefingServiceCache_init(TOTSPTravelBriefingServiceCache *self) {
  NSObject_init(self);
  [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:@"TravelBriefingServiceCache created"];
}

TOTSPTravelBriefingServiceCache *new_TOTSPTravelBriefingServiceCache_init() {
  J2OBJC_NEW_IMPL(TOTSPTravelBriefingServiceCache, init)
}

TOTSPTravelBriefingServiceCache *create_TOTSPTravelBriefingServiceCache_init() {
  J2OBJC_CREATE_IMPL(TOTSPTravelBriefingServiceCache, init)
}

void TOTSPTravelBriefingServiceCache_cacheCountryWithNSString_withTOTSPCountry_(NSString *name, TOTSPCountry *country) {
  TOTSPTravelBriefingServiceCache_initialize();
  [((id<ComGoogleCommonCacheCache>) nil_chk(TOTSPTravelBriefingServiceCache_CACHE_COUNTRY)) putWithId:name withId:country];
}

void TOTSPTravelBriefingServiceCache_cacheCountryListWithJavaUtilList_(id<JavaUtilList> countries) {
  TOTSPTravelBriefingServiceCache_initialize();
  [((id<ComGoogleCommonCacheCache>) nil_chk(TOTSPTravelBriefingServiceCache_CACHE_COUNTRYLIST)) invalidateAll];
  [TOTSPTravelBriefingServiceCache_CACHE_COUNTRYLIST putWithId:TOTSPTravelBriefingServiceCache_CACHE_KEY_COUNTRYLIST withId:countries];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(TOTSPTravelBriefingServiceCache)
