//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: build/libs_raw/rxjava-1.1.6-sources/rx/internal/operators/OperatorReplay.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/Math.h"
#include "java/lang/NullPointerException.h"
#include "java/lang/System.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/List.h"
#include "java/util/concurrent/TimeUnit.h"
#include "java/util/concurrent/atomic/AtomicBoolean.h"
#include "java/util/concurrent/atomic/AtomicLong.h"
#include "java/util/concurrent/atomic/AtomicReference.h"
#include "rx/Observable.h"
#include "rx/Producer.h"
#include "rx/Scheduler.h"
#include "rx/Subscriber.h"
#include "rx/Subscription.h"
#include "rx/exceptions/Exceptions.h"
#include "rx/exceptions/OnErrorThrowable.h"
#include "rx/functions/Action0.h"
#include "rx/functions/Action1.h"
#include "rx/functions/Func0.h"
#include "rx/functions/Func1.h"
#include "rx/internal/operators/NotificationLite.h"
#include "rx/internal/operators/OperatorReplay.h"
#include "rx/internal/util/OpenHashSet.h"
#include "rx/observables/ConnectableObservable.h"
#include "rx/schedulers/Timestamped.h"
#include "rx/subscriptions/Subscriptions.h"

#pragma clang diagnostic ignored "-Wincomplete-implementation"

@interface RxInternalOperatorsOperatorReplay ()

- (instancetype)initWithRxObservable_OnSubscribe:(id<RxObservable_OnSubscribe>)onSubscribe
                                withRxObservable:(RxObservable *)source
     withJavaUtilConcurrentAtomicAtomicReference:(JavaUtilConcurrentAtomicAtomicReference *)current
                            withRxFunctionsFunc0:(id<RxFunctionsFunc0>)bufferFactory;

@end

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_initWithRxObservable_OnSubscribe_withRxObservable_withJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(RxInternalOperatorsOperatorReplay *self, id<RxObservable_OnSubscribe> onSubscribe, RxObservable *source, JavaUtilConcurrentAtomicAtomicReference *current, id<RxFunctionsFunc0> bufferFactory);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay *new_RxInternalOperatorsOperatorReplay_initWithRxObservable_OnSubscribe_withRxObservable_withJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(id<RxObservable_OnSubscribe> onSubscribe, RxObservable *source, JavaUtilConcurrentAtomicAtomicReference *current, id<RxFunctionsFunc0> bufferFactory) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay *create_RxInternalOperatorsOperatorReplay_initWithRxObservable_OnSubscribe_withRxObservable_withJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(id<RxObservable_OnSubscribe> onSubscribe, RxObservable *source, JavaUtilConcurrentAtomicAtomicReference *current, id<RxFunctionsFunc0> bufferFactory);

@interface RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1 : NSObject < RxFunctionsAction0 > {
 @public
  RxInternalOperatorsOperatorReplay_ReplaySubscriber *this$0_;
}

- (void)call;

- (instancetype)initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber:(RxInternalOperatorsOperatorReplay_ReplaySubscriber *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1, this$0_, RxInternalOperatorsOperatorReplay_ReplaySubscriber *)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_(RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1 *self, RxInternalOperatorsOperatorReplay_ReplaySubscriber *outer$);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1 *new_RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_(RxInternalOperatorsOperatorReplay_ReplaySubscriber *outer$) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1 *create_RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_(RxInternalOperatorsOperatorReplay_ReplaySubscriber *outer$);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1)

/*!
 */
inline jlong RxInternalOperatorsOperatorReplay_InnerProducer_get_serialVersionUID();
#define RxInternalOperatorsOperatorReplay_InnerProducer_serialVersionUID -4453897557930727610LL
J2OBJC_STATIC_FIELD_CONSTANT(RxInternalOperatorsOperatorReplay_InnerProducer, serialVersionUID, jlong)

@interface RxInternalOperatorsOperatorReplay_ReplayBuffer : NSObject

@end

/*!
 */
inline jlong RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer_get_serialVersionUID();
#define RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer_serialVersionUID 7063189396499112664LL
J2OBJC_STATIC_FIELD_CONSTANT(RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer, serialVersionUID, jlong)

/*!
 */
inline jlong RxInternalOperatorsOperatorReplay_Node_get_serialVersionUID();
#define RxInternalOperatorsOperatorReplay_Node_serialVersionUID 245354315435971818LL
J2OBJC_STATIC_FIELD_CONSTANT(RxInternalOperatorsOperatorReplay_Node, serialVersionUID, jlong)

/*!
 */
inline jlong RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_get_serialVersionUID();
#define RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_serialVersionUID 2346567790059478686LL
J2OBJC_STATIC_FIELD_CONSTANT(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer, serialVersionUID, jlong)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_addLastWithRxInternalOperatorsOperatorReplay_Node_(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer *self, RxInternalOperatorsOperatorReplay_Node *n);

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_removeFirst(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer *self);

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_setFirstWithRxInternalOperatorsOperatorReplay_Node_(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer *self, RxInternalOperatorsOperatorReplay_Node *n);

/*!
 */
inline jlong RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer_get_serialVersionUID();
#define RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer_serialVersionUID -5898283885385201806LL
J2OBJC_STATIC_FIELD_CONSTANT(RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer, serialVersionUID, jlong)

/*!
 */
inline jlong RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer_get_serialVersionUID();
#define RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer_serialVersionUID 3457957419649567404LL
J2OBJC_STATIC_FIELD_CONSTANT(RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer, serialVersionUID, jlong)

@interface RxInternalOperatorsOperatorReplay_$1 : NSObject < RxFunctionsFunc0 >

- (id)call;

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorReplay_$1)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_$1_init(RxInternalOperatorsOperatorReplay_$1 *self);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$1 *new_RxInternalOperatorsOperatorReplay_$1_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$1 *create_RxInternalOperatorsOperatorReplay_$1_init();

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorReplay_$1)

@interface RxInternalOperatorsOperatorReplay_$2 : NSObject < RxObservable_OnSubscribe > {
 @public
  id<RxFunctionsFunc0> val$connectableFactory_;
  id<RxFunctionsFunc1> val$selector_;
}

- (void)callWithId:(RxSubscriber *)child;

- (instancetype)initWithRxFunctionsFunc0:(id<RxFunctionsFunc0>)capture$0
                    withRxFunctionsFunc1:(id<RxFunctionsFunc1>)capture$1;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorReplay_$2)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorReplay_$2, val$connectableFactory_, id<RxFunctionsFunc0>)
J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorReplay_$2, val$selector_, id<RxFunctionsFunc1>)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_$2_initWithRxFunctionsFunc0_withRxFunctionsFunc1_(RxInternalOperatorsOperatorReplay_$2 *self, id<RxFunctionsFunc0> capture$0, id<RxFunctionsFunc1> capture$1);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$2 *new_RxInternalOperatorsOperatorReplay_$2_initWithRxFunctionsFunc0_withRxFunctionsFunc1_(id<RxFunctionsFunc0> capture$0, id<RxFunctionsFunc1> capture$1) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$2 *create_RxInternalOperatorsOperatorReplay_$2_initWithRxFunctionsFunc0_withRxFunctionsFunc1_(id<RxFunctionsFunc0> capture$0, id<RxFunctionsFunc1> capture$1);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorReplay_$2)

@interface RxInternalOperatorsOperatorReplay_$2_$1 : NSObject < RxFunctionsAction1 > {
 @public
  RxSubscriber *val$child_;
}

- (void)callWithId:(id<RxSubscription>)t;

- (instancetype)initWithRxSubscriber:(RxSubscriber *)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorReplay_$2_$1)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorReplay_$2_$1, val$child_, RxSubscriber *)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_$2_$1_initWithRxSubscriber_(RxInternalOperatorsOperatorReplay_$2_$1 *self, RxSubscriber *capture$0);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$2_$1 *new_RxInternalOperatorsOperatorReplay_$2_$1_initWithRxSubscriber_(RxSubscriber *capture$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$2_$1 *create_RxInternalOperatorsOperatorReplay_$2_$1_initWithRxSubscriber_(RxSubscriber *capture$0);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorReplay_$2_$1)

@interface RxInternalOperatorsOperatorReplay_$3 : NSObject < RxObservable_OnSubscribe > {
 @public
  RxObservable *val$observable_;
}

- (void)callWithId:(RxSubscriber *)child;

- (instancetype)initWithRxObservable:(RxObservable *)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorReplay_$3)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorReplay_$3, val$observable_, RxObservable *)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_$3_initWithRxObservable_(RxInternalOperatorsOperatorReplay_$3 *self, RxObservable *capture$0);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$3 *new_RxInternalOperatorsOperatorReplay_$3_initWithRxObservable_(RxObservable *capture$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$3 *create_RxInternalOperatorsOperatorReplay_$3_initWithRxObservable_(RxObservable *capture$0);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorReplay_$3)

@interface RxInternalOperatorsOperatorReplay_$3_$1 : RxSubscriber {
 @public
  RxSubscriber *val$child_;
}

- (void)onNextWithId:(id)t;

- (void)onErrorWithNSException:(NSException *)e;

- (void)onCompleted;

- (instancetype)initWithRxSubscriber:(RxSubscriber *)capture$0
                    withRxSubscriber:(RxSubscriber *)arg$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorReplay_$3_$1)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorReplay_$3_$1, val$child_, RxSubscriber *)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_$3_$1_initWithRxSubscriber_withRxSubscriber_(RxInternalOperatorsOperatorReplay_$3_$1 *self, RxSubscriber *capture$0, RxSubscriber *arg$0);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$3_$1 *new_RxInternalOperatorsOperatorReplay_$3_$1_initWithRxSubscriber_withRxSubscriber_(RxSubscriber *capture$0, RxSubscriber *arg$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$3_$1 *create_RxInternalOperatorsOperatorReplay_$3_$1_initWithRxSubscriber_withRxSubscriber_(RxSubscriber *capture$0, RxSubscriber *arg$0);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorReplay_$3_$1)

@interface RxInternalOperatorsOperatorReplay_$4 : RxObservablesConnectableObservable {
 @public
  RxObservablesConnectableObservable *val$co_;
}

- (void)connectWithRxFunctionsAction1:(id<RxFunctionsAction1>)connection;

- (instancetype)initWithRxObservablesConnectableObservable:(RxObservablesConnectableObservable *)capture$0
                              withRxObservable_OnSubscribe:(id<RxObservable_OnSubscribe>)arg$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorReplay_$4)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorReplay_$4, val$co_, RxObservablesConnectableObservable *)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_$4_initWithRxObservablesConnectableObservable_withRxObservable_OnSubscribe_(RxInternalOperatorsOperatorReplay_$4 *self, RxObservablesConnectableObservable *capture$0, id<RxObservable_OnSubscribe> arg$0);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$4 *new_RxInternalOperatorsOperatorReplay_$4_initWithRxObservablesConnectableObservable_withRxObservable_OnSubscribe_(RxObservablesConnectableObservable *capture$0, id<RxObservable_OnSubscribe> arg$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$4 *create_RxInternalOperatorsOperatorReplay_$4_initWithRxObservablesConnectableObservable_withRxObservable_OnSubscribe_(RxObservablesConnectableObservable *capture$0, id<RxObservable_OnSubscribe> arg$0);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorReplay_$4)

@interface RxInternalOperatorsOperatorReplay_$5 : NSObject < RxFunctionsFunc0 > {
 @public
  jint val$bufferSize_;
}

- (id<RxInternalOperatorsOperatorReplay_ReplayBuffer>)call;

- (instancetype)initWithInt:(jint)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorReplay_$5)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_$5_initWithInt_(RxInternalOperatorsOperatorReplay_$5 *self, jint capture$0);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$5 *new_RxInternalOperatorsOperatorReplay_$5_initWithInt_(jint capture$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$5 *create_RxInternalOperatorsOperatorReplay_$5_initWithInt_(jint capture$0);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorReplay_$5)

@interface RxInternalOperatorsOperatorReplay_$6 : NSObject < RxFunctionsFunc0 > {
 @public
  jint val$bufferSize_;
  jlong val$maxAgeInMillis_;
  RxScheduler *val$scheduler_;
}

- (id<RxInternalOperatorsOperatorReplay_ReplayBuffer>)call;

- (instancetype)initWithInt:(jint)capture$0
                   withLong:(jlong)capture$1
            withRxScheduler:(RxScheduler *)capture$2;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorReplay_$6)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorReplay_$6, val$scheduler_, RxScheduler *)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_$6_initWithInt_withLong_withRxScheduler_(RxInternalOperatorsOperatorReplay_$6 *self, jint capture$0, jlong capture$1, RxScheduler *capture$2);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$6 *new_RxInternalOperatorsOperatorReplay_$6_initWithInt_withLong_withRxScheduler_(jint capture$0, jlong capture$1, RxScheduler *capture$2) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$6 *create_RxInternalOperatorsOperatorReplay_$6_initWithInt_withLong_withRxScheduler_(jint capture$0, jlong capture$1, RxScheduler *capture$2);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorReplay_$6)

@interface RxInternalOperatorsOperatorReplay_$7 : NSObject < RxObservable_OnSubscribe > {
 @public
  JavaUtilConcurrentAtomicAtomicReference *val$curr_;
  id<RxFunctionsFunc0> val$bufferFactory_;
}

- (void)callWithId:(RxSubscriber *)child;

- (instancetype)initWithJavaUtilConcurrentAtomicAtomicReference:(JavaUtilConcurrentAtomicAtomicReference *)capture$0
                                           withRxFunctionsFunc0:(id<RxFunctionsFunc0>)capture$1;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorReplay_$7)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorReplay_$7, val$curr_, JavaUtilConcurrentAtomicAtomicReference *)
J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorReplay_$7, val$bufferFactory_, id<RxFunctionsFunc0>)

__attribute__((unused)) static void RxInternalOperatorsOperatorReplay_$7_initWithJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(RxInternalOperatorsOperatorReplay_$7 *self, JavaUtilConcurrentAtomicAtomicReference *capture$0, id<RxFunctionsFunc0> capture$1);

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$7 *new_RxInternalOperatorsOperatorReplay_$7_initWithJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(JavaUtilConcurrentAtomicAtomicReference *capture$0, id<RxFunctionsFunc0> capture$1) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorReplay_$7 *create_RxInternalOperatorsOperatorReplay_$7_initWithJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(JavaUtilConcurrentAtomicAtomicReference *capture$0, id<RxFunctionsFunc0> capture$1);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorReplay_$7)

J2OBJC_INITIALIZED_DEFN(RxInternalOperatorsOperatorReplay)

id<RxFunctionsFunc0> RxInternalOperatorsOperatorReplay_DEFAULT_UNBOUNDED_FACTORY;

@implementation RxInternalOperatorsOperatorReplay

+ (id<RxFunctionsFunc0>)DEFAULT_UNBOUNDED_FACTORY {
  return RxInternalOperatorsOperatorReplay_DEFAULT_UNBOUNDED_FACTORY;
}

+ (RxObservable *)multicastSelectorWithRxFunctionsFunc0:(id<RxFunctionsFunc0>)connectableFactory
                                   withRxFunctionsFunc1:(id<RxFunctionsFunc1>)selector {
  return RxInternalOperatorsOperatorReplay_multicastSelectorWithRxFunctionsFunc0_withRxFunctionsFunc1_(connectableFactory, selector);
}

+ (RxObservablesConnectableObservable *)observeOnWithRxObservablesConnectableObservable:(RxObservablesConnectableObservable *)co
                                                                        withRxScheduler:(RxScheduler *)scheduler {
  return RxInternalOperatorsOperatorReplay_observeOnWithRxObservablesConnectableObservable_withRxScheduler_(co, scheduler);
}

+ (RxObservablesConnectableObservable *)createWithRxObservable:(RxObservable *)source {
  return RxInternalOperatorsOperatorReplay_createWithRxObservable_(source);
}

+ (RxObservablesConnectableObservable *)createWithRxObservable:(RxObservable *)source
                                                       withInt:(jint)bufferSize {
  return RxInternalOperatorsOperatorReplay_createWithRxObservable_withInt_(source, bufferSize);
}

+ (RxObservablesConnectableObservable *)createWithRxObservable:(RxObservable *)source
                                                      withLong:(jlong)maxAge
                                withJavaUtilConcurrentTimeUnit:(JavaUtilConcurrentTimeUnit *)unit
                                               withRxScheduler:(RxScheduler *)scheduler {
  return RxInternalOperatorsOperatorReplay_createWithRxObservable_withLong_withJavaUtilConcurrentTimeUnit_withRxScheduler_(source, maxAge, unit, scheduler);
}

+ (RxObservablesConnectableObservable *)createWithRxObservable:(RxObservable *)source
                                                      withLong:(jlong)maxAge
                                withJavaUtilConcurrentTimeUnit:(JavaUtilConcurrentTimeUnit *)unit
                                               withRxScheduler:(RxScheduler *)scheduler
                                                       withInt:(jint)bufferSize {
  return RxInternalOperatorsOperatorReplay_createWithRxObservable_withLong_withJavaUtilConcurrentTimeUnit_withRxScheduler_withInt_(source, maxAge, unit, scheduler, bufferSize);
}

+ (RxObservablesConnectableObservable *)createWithRxObservable:(RxObservable *)source
                                          withRxFunctionsFunc0:(id<RxFunctionsFunc0>)bufferFactory {
  return RxInternalOperatorsOperatorReplay_createWithRxObservable_withRxFunctionsFunc0_(source, bufferFactory);
}

- (instancetype)initWithRxObservable_OnSubscribe:(id<RxObservable_OnSubscribe>)onSubscribe
                                withRxObservable:(RxObservable *)source
     withJavaUtilConcurrentAtomicAtomicReference:(JavaUtilConcurrentAtomicAtomicReference *)current
                            withRxFunctionsFunc0:(id<RxFunctionsFunc0>)bufferFactory {
  RxInternalOperatorsOperatorReplay_initWithRxObservable_OnSubscribe_withRxObservable_withJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(self, onSubscribe, source, current, bufferFactory);
  return self;
}

- (void)connectWithRxFunctionsAction1:(id<RxFunctionsAction1>)connection {
  jboolean doConnect = false;
  RxInternalOperatorsOperatorReplay_ReplaySubscriber *ps;
  for (; ; ) {
    ps = [((JavaUtilConcurrentAtomicAtomicReference *) nil_chk(current_)) get];
    if (ps == nil || [ps isUnsubscribed]) {
      RxInternalOperatorsOperatorReplay_ReplaySubscriber *u = new_RxInternalOperatorsOperatorReplay_ReplaySubscriber_initWithJavaUtilConcurrentAtomicAtomicReference_withRxInternalOperatorsOperatorReplay_ReplayBuffer_(current_, [((id<RxFunctionsFunc0>) nil_chk(bufferFactory_)) call]);
      [u init__];
      if (![current_ compareAndSetWithId:ps withId:u]) {
        continue;
      }
      ps = u;
    }
    doConnect = (![((JavaUtilConcurrentAtomicAtomicBoolean *) nil_chk(ps->shouldConnect_)) get] && [ps->shouldConnect_ compareAndSetWithBoolean:false withBoolean:true]);
    break;
  }
  [((id<RxFunctionsAction1>) nil_chk(connection)) callWithId:ps];
  if (doConnect) {
    (void) [((RxObservable *) nil_chk(source_)) unsafeSubscribeWithRxSubscriber:ps];
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "multicastSelectorWithRxFunctionsFunc0:withRxFunctionsFunc1:", "LRxObservable;", 0x9, 0, 1, -1, 2, -1, -1 },
    { "observeOnWithRxObservablesConnectableObservable:withRxScheduler:", "LRxObservablesConnectableObservable;", 0x9, 3, 4, -1, 5, -1, -1 },
    { "createWithRxObservable:", "LRxObservablesConnectableObservable;", 0x9, 6, 7, -1, 8, -1, -1 },
    { "createWithRxObservable:withInt:", "LRxObservablesConnectableObservable;", 0x9, 6, 9, -1, 10, -1, -1 },
    { "createWithRxObservable:withLong:withJavaUtilConcurrentTimeUnit:withRxScheduler:", "LRxObservablesConnectableObservable;", 0x9, 6, 11, -1, 12, -1, -1 },
    { "createWithRxObservable:withLong:withJavaUtilConcurrentTimeUnit:withRxScheduler:withInt:", "LRxObservablesConnectableObservable;", 0x9, 6, 13, -1, 14, -1, -1 },
    { "createWithRxObservable:withRxFunctionsFunc0:", "LRxObservablesConnectableObservable;", 0x8, 6, 15, -1, 16, -1, -1 },
    { "initWithRxObservable_OnSubscribe:withRxObservable:withJavaUtilConcurrentAtomicAtomicReference:withRxFunctionsFunc0:", NULL, 0x2, -1, 17, -1, 18, -1, -1 },
    { "connectWithRxFunctionsAction1:", "V", 0x1, 19, 20, -1, 21, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "source_", "LRxObservable;", .constantValue.asLong = 0, 0x10, -1, -1, 22, -1 },
    { "current_", "LJavaUtilConcurrentAtomicAtomicReference;", .constantValue.asLong = 0, 0x10, -1, -1, 23, -1 },
    { "bufferFactory_", "LRxFunctionsFunc0;", .constantValue.asLong = 0, 0x10, -1, -1, 24, -1 },
    { "DEFAULT_UNBOUNDED_FACTORY", "LRxFunctionsFunc0;", .constantValue.asLong = 0, 0x18, -1, 25, -1, -1 },
  };
  static const void *ptrTable[] = { "multicastSelector", "LRxFunctionsFunc0;LRxFunctionsFunc1;", "<T:Ljava/lang/Object;U:Ljava/lang/Object;R:Ljava/lang/Object;>(Lrx/functions/Func0<+Lrx/observables/ConnectableObservable<TU;>;>;Lrx/functions/Func1<-Lrx/Observable<TU;>;+Lrx/Observable<TR;>;>;)Lrx/Observable<TR;>;", "observeOn", "LRxObservablesConnectableObservable;LRxScheduler;", "<T:Ljava/lang/Object;>(Lrx/observables/ConnectableObservable<TT;>;Lrx/Scheduler;)Lrx/observables/ConnectableObservable<TT;>;", "create", "LRxObservable;", "<T:Ljava/lang/Object;>(Lrx/Observable<+TT;>;)Lrx/observables/ConnectableObservable<TT;>;", "LRxObservable;I", "<T:Ljava/lang/Object;>(Lrx/Observable<+TT;>;I)Lrx/observables/ConnectableObservable<TT;>;", "LRxObservable;JLJavaUtilConcurrentTimeUnit;LRxScheduler;", "<T:Ljava/lang/Object;>(Lrx/Observable<+TT;>;JLjava/util/concurrent/TimeUnit;Lrx/Scheduler;)Lrx/observables/ConnectableObservable<TT;>;", "LRxObservable;JLJavaUtilConcurrentTimeUnit;LRxScheduler;I", "<T:Ljava/lang/Object;>(Lrx/Observable<+TT;>;JLjava/util/concurrent/TimeUnit;Lrx/Scheduler;I)Lrx/observables/ConnectableObservable<TT;>;", "LRxObservable;LRxFunctionsFunc0;", "<T:Ljava/lang/Object;>(Lrx/Observable<+TT;>;Lrx/functions/Func0<+Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;>;)Lrx/observables/ConnectableObservable<TT;>;", "LRxObservable_OnSubscribe;LRxObservable;LJavaUtilConcurrentAtomicAtomicReference;LRxFunctionsFunc0;", "(Lrx/Observable$OnSubscribe<TT;>;Lrx/Observable<+TT;>;Ljava/util/concurrent/atomic/AtomicReference<Lrx/internal/operators/OperatorReplay$ReplaySubscriber<TT;>;>;Lrx/functions/Func0<+Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;>;)V", "connect", "LRxFunctionsAction1;", "(Lrx/functions/Action1<-Lrx/Subscription;>;)V", "Lrx/Observable<+TT;>;", "Ljava/util/concurrent/atomic/AtomicReference<Lrx/internal/operators/OperatorReplay$ReplaySubscriber<TT;>;>;", "Lrx/functions/Func0<+Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;>;", &RxInternalOperatorsOperatorReplay_DEFAULT_UNBOUNDED_FACTORY, "LRxInternalOperatorsOperatorReplay_ReplaySubscriber;LRxInternalOperatorsOperatorReplay_InnerProducer;LRxInternalOperatorsOperatorReplay_ReplayBuffer;LRxInternalOperatorsOperatorReplay_UnboundedReplayBuffer;LRxInternalOperatorsOperatorReplay_Node;LRxInternalOperatorsOperatorReplay_BoundedReplayBuffer;LRxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer;LRxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer;", "<T:Ljava/lang/Object;>Lrx/observables/ConnectableObservable<TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay = { "OperatorReplay", "rx.internal.operators", ptrTable, methods, fields, 7, 0x11, 9, 4, -1, 26, -1, 27, -1 };
  return &_RxInternalOperatorsOperatorReplay;
}

+ (void)initialize {
  if (self == [RxInternalOperatorsOperatorReplay class]) {
    RxInternalOperatorsOperatorReplay_DEFAULT_UNBOUNDED_FACTORY = new_RxInternalOperatorsOperatorReplay_$1_init();
    J2OBJC_SET_INITIALIZED(RxInternalOperatorsOperatorReplay)
  }
}

@end

RxObservable *RxInternalOperatorsOperatorReplay_multicastSelectorWithRxFunctionsFunc0_withRxFunctionsFunc1_(id<RxFunctionsFunc0> connectableFactory, id<RxFunctionsFunc1> selector) {
  RxInternalOperatorsOperatorReplay_initialize();
  return RxObservable_createWithRxObservable_OnSubscribe_(new_RxInternalOperatorsOperatorReplay_$2_initWithRxFunctionsFunc0_withRxFunctionsFunc1_(connectableFactory, selector));
}

RxObservablesConnectableObservable *RxInternalOperatorsOperatorReplay_observeOnWithRxObservablesConnectableObservable_withRxScheduler_(RxObservablesConnectableObservable *co, RxScheduler *scheduler) {
  RxInternalOperatorsOperatorReplay_initialize();
  RxObservable *observable = [((RxObservablesConnectableObservable *) nil_chk(co)) observeOnWithRxScheduler:scheduler];
  id<RxObservable_OnSubscribe> onSubscribe = new_RxInternalOperatorsOperatorReplay_$3_initWithRxObservable_(observable);
  return new_RxInternalOperatorsOperatorReplay_$4_initWithRxObservablesConnectableObservable_withRxObservable_OnSubscribe_(co, onSubscribe);
}

RxObservablesConnectableObservable *RxInternalOperatorsOperatorReplay_createWithRxObservable_(RxObservable *source) {
  RxInternalOperatorsOperatorReplay_initialize();
  return RxInternalOperatorsOperatorReplay_createWithRxObservable_withRxFunctionsFunc0_(source, RxInternalOperatorsOperatorReplay_DEFAULT_UNBOUNDED_FACTORY);
}

RxObservablesConnectableObservable *RxInternalOperatorsOperatorReplay_createWithRxObservable_withInt_(RxObservable *source, jint bufferSize) {
  RxInternalOperatorsOperatorReplay_initialize();
  if (bufferSize == JavaLangInteger_MAX_VALUE) {
    return RxInternalOperatorsOperatorReplay_createWithRxObservable_(source);
  }
  return RxInternalOperatorsOperatorReplay_createWithRxObservable_withRxFunctionsFunc0_(source, new_RxInternalOperatorsOperatorReplay_$5_initWithInt_(bufferSize));
}

RxObservablesConnectableObservable *RxInternalOperatorsOperatorReplay_createWithRxObservable_withLong_withJavaUtilConcurrentTimeUnit_withRxScheduler_(RxObservable *source, jlong maxAge, JavaUtilConcurrentTimeUnit *unit, RxScheduler *scheduler) {
  RxInternalOperatorsOperatorReplay_initialize();
  return RxInternalOperatorsOperatorReplay_createWithRxObservable_withLong_withJavaUtilConcurrentTimeUnit_withRxScheduler_withInt_(source, maxAge, unit, scheduler, JavaLangInteger_MAX_VALUE);
}

RxObservablesConnectableObservable *RxInternalOperatorsOperatorReplay_createWithRxObservable_withLong_withJavaUtilConcurrentTimeUnit_withRxScheduler_withInt_(RxObservable *source, jlong maxAge, JavaUtilConcurrentTimeUnit *unit, RxScheduler *scheduler, jint bufferSize) {
  RxInternalOperatorsOperatorReplay_initialize();
  jlong maxAgeInMillis = [((JavaUtilConcurrentTimeUnit *) nil_chk(unit)) toMillisWithLong:maxAge];
  return RxInternalOperatorsOperatorReplay_createWithRxObservable_withRxFunctionsFunc0_(source, new_RxInternalOperatorsOperatorReplay_$6_initWithInt_withLong_withRxScheduler_(bufferSize, maxAgeInMillis, scheduler));
}

RxObservablesConnectableObservable *RxInternalOperatorsOperatorReplay_createWithRxObservable_withRxFunctionsFunc0_(RxObservable *source, id<RxFunctionsFunc0> bufferFactory) {
  RxInternalOperatorsOperatorReplay_initialize();
  JavaUtilConcurrentAtomicAtomicReference *curr = new_JavaUtilConcurrentAtomicAtomicReference_init();
  id<RxObservable_OnSubscribe> onSubscribe = new_RxInternalOperatorsOperatorReplay_$7_initWithJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(curr, bufferFactory);
  return new_RxInternalOperatorsOperatorReplay_initWithRxObservable_OnSubscribe_withRxObservable_withJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(onSubscribe, source, curr, bufferFactory);
}

void RxInternalOperatorsOperatorReplay_initWithRxObservable_OnSubscribe_withRxObservable_withJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(RxInternalOperatorsOperatorReplay *self, id<RxObservable_OnSubscribe> onSubscribe, RxObservable *source, JavaUtilConcurrentAtomicAtomicReference *current, id<RxFunctionsFunc0> bufferFactory) {
  RxObservablesConnectableObservable_initWithRxObservable_OnSubscribe_(self, onSubscribe);
  self->source_ = source;
  self->current_ = current;
  self->bufferFactory_ = bufferFactory;
}

RxInternalOperatorsOperatorReplay *new_RxInternalOperatorsOperatorReplay_initWithRxObservable_OnSubscribe_withRxObservable_withJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(id<RxObservable_OnSubscribe> onSubscribe, RxObservable *source, JavaUtilConcurrentAtomicAtomicReference *current, id<RxFunctionsFunc0> bufferFactory) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay, initWithRxObservable_OnSubscribe_withRxObservable_withJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_, onSubscribe, source, current, bufferFactory)
}

RxInternalOperatorsOperatorReplay *create_RxInternalOperatorsOperatorReplay_initWithRxObservable_OnSubscribe_withRxObservable_withJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(id<RxObservable_OnSubscribe> onSubscribe, RxObservable *source, JavaUtilConcurrentAtomicAtomicReference *current, id<RxFunctionsFunc0> bufferFactory) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay, initWithRxObservable_OnSubscribe_withRxObservable_withJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_, onSubscribe, source, current, bufferFactory)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay)

J2OBJC_INITIALIZED_DEFN(RxInternalOperatorsOperatorReplay_ReplaySubscriber)

IOSObjectArray *RxInternalOperatorsOperatorReplay_ReplaySubscriber_EMPTY;
IOSObjectArray *RxInternalOperatorsOperatorReplay_ReplaySubscriber_TERMINATED;

@implementation RxInternalOperatorsOperatorReplay_ReplaySubscriber

+ (IOSObjectArray *)EMPTY {
  return RxInternalOperatorsOperatorReplay_ReplaySubscriber_EMPTY;
}

+ (IOSObjectArray *)TERMINATED {
  return RxInternalOperatorsOperatorReplay_ReplaySubscriber_TERMINATED;
}

- (instancetype)initWithJavaUtilConcurrentAtomicAtomicReference:(JavaUtilConcurrentAtomicAtomicReference *)current
             withRxInternalOperatorsOperatorReplay_ReplayBuffer:(id<RxInternalOperatorsOperatorReplay_ReplayBuffer>)buffer {
  RxInternalOperatorsOperatorReplay_ReplaySubscriber_initWithJavaUtilConcurrentAtomicAtomicReference_withRxInternalOperatorsOperatorReplay_ReplayBuffer_(self, current, buffer);
  return self;
}

- (void)init__ {
  [self addWithRxSubscription:RxSubscriptionsSubscriptions_createWithRxFunctionsAction0_(new_RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_(self))];
}

- (jboolean)addWithRxInternalOperatorsOperatorReplay_InnerProducer:(RxInternalOperatorsOperatorReplay_InnerProducer *)producer {
  if (producer == nil) {
    @throw new_JavaLangNullPointerException_init();
  }
  if (JreLoadVolatileBoolean(&terminated_)) {
    return false;
  }
  @synchronized(producers_) {
    if (JreLoadVolatileBoolean(&terminated_)) {
      return false;
    }
    [((RxInternalUtilOpenHashSet *) nil_chk(producers_)) addWithId:producer];
    producersVersion_++;
  }
  return true;
}

- (void)removeWithRxInternalOperatorsOperatorReplay_InnerProducer:(RxInternalOperatorsOperatorReplay_InnerProducer *)producer {
  if (JreLoadVolatileBoolean(&terminated_)) {
    return;
  }
  @synchronized(producers_) {
    if (JreLoadVolatileBoolean(&terminated_)) {
      return;
    }
    [((RxInternalUtilOpenHashSet *) nil_chk(producers_)) removeWithId:producer];
    producersVersion_++;
  }
}

- (void)setProducerWithRxProducer:(id<RxProducer>)p {
  id<RxProducer> p0 = JreLoadVolatileId(&producer_ReplaySubscriber_);
  if (p0 != nil) {
    @throw new_JavaLangIllegalStateException_initWithNSString_(@"Only a single producer can be set on a Subscriber.");
  }
  (void) JreVolatileStrongAssign(&producer_ReplaySubscriber_, p);
  [self manageRequestsWithRxInternalOperatorsOperatorReplay_InnerProducer:nil];
  [self replay];
}

- (void)onNextWithId:(id)t {
  if (!done_) {
    [((id<RxInternalOperatorsOperatorReplay_ReplayBuffer>) nil_chk(buffer_)) nextWithId:t];
    [self replay];
  }
}

- (void)onErrorWithNSException:(NSException *)e {
  if (!done_) {
    done_ = true;
    @try {
      [((id<RxInternalOperatorsOperatorReplay_ReplayBuffer>) nil_chk(buffer_)) errorWithNSException:e];
      [self replay];
    }
    @finally {
      [self unsubscribe];
    }
  }
}

- (void)onCompleted {
  if (!done_) {
    done_ = true;
    @try {
      [((id<RxInternalOperatorsOperatorReplay_ReplayBuffer>) nil_chk(buffer_)) complete];
      [self replay];
    }
    @finally {
      [self unsubscribe];
    }
  }
}

- (void)manageRequestsWithRxInternalOperatorsOperatorReplay_InnerProducer:(RxInternalOperatorsOperatorReplay_InnerProducer *)inner {
  if ([self isUnsubscribed]) {
    return;
  }
  @synchronized(self) {
    if (emitting_) {
      if (inner != nil) {
        id<JavaUtilList> q = coordinationQueue_;
        if (q == nil) {
          q = new_JavaUtilArrayList_init();
          coordinationQueue_ = q;
        }
        [q addWithId:inner];
      }
      else {
        coordinateAll_ = true;
      }
      missed_ = true;
      return;
    }
    emitting_ = true;
  }
  jlong ri = maxChildRequested_;
  jlong maxTotalRequested;
  if (inner != nil) {
    maxTotalRequested = JavaLangMath_maxWithLong_withLong_(ri, [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(inner->totalRequested_)) get]);
  }
  else {
    maxTotalRequested = ri;
    IOSObjectArray *a = [self copyProducers];
    {
      IOSObjectArray *a__ = a;
      RxInternalOperatorsOperatorReplay_InnerProducer * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
      RxInternalOperatorsOperatorReplay_InnerProducer * const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        RxInternalOperatorsOperatorReplay_InnerProducer *rp = *b__++;
        if (rp != nil) {
          maxTotalRequested = JavaLangMath_maxWithLong_withLong_(maxTotalRequested, [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(rp->totalRequested_)) get]);
        }
      }
    }
  }
  [self makeRequestWithLong:maxTotalRequested withLong:ri];
  for (; ; ) {
    if ([self isUnsubscribed]) {
      return;
    }
    id<JavaUtilList> q;
    jboolean all;
    @synchronized(self) {
      if (!missed_) {
        emitting_ = false;
        return;
      }
      missed_ = false;
      q = coordinationQueue_;
      coordinationQueue_ = nil;
      all = coordinateAll_;
      coordinateAll_ = false;
    }
    ri = maxChildRequested_;
    maxTotalRequested = ri;
    if (q != nil) {
      for (RxInternalOperatorsOperatorReplay_InnerProducer * __strong rp in q) {
        maxTotalRequested = JavaLangMath_maxWithLong_withLong_(maxTotalRequested, [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(((RxInternalOperatorsOperatorReplay_InnerProducer *) nil_chk(rp))->totalRequested_)) get]);
      }
    }
    if (all) {
      IOSObjectArray *a = [self copyProducers];
      {
        IOSObjectArray *a__ = a;
        RxInternalOperatorsOperatorReplay_InnerProducer * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
        RxInternalOperatorsOperatorReplay_InnerProducer * const *e__ = b__ + a__->size_;
        while (b__ < e__) {
          RxInternalOperatorsOperatorReplay_InnerProducer *rp = *b__++;
          if (rp != nil) {
            maxTotalRequested = JavaLangMath_maxWithLong_withLong_(maxTotalRequested, [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(rp->totalRequested_)) get]);
          }
        }
      }
    }
    [self makeRequestWithLong:maxTotalRequested withLong:ri];
  }
}

- (IOSObjectArray *)copyProducers {
  @synchronized(producers_) {
    IOSObjectArray *a = [((RxInternalUtilOpenHashSet *) nil_chk(producers_)) values];
    jint n = ((IOSObjectArray *) nil_chk(a))->size_;
    IOSObjectArray *result = [IOSObjectArray newArrayWithLength:n type:RxInternalOperatorsOperatorReplay_InnerProducer_class_()];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(a, 0, result, 0, n);
    return result;
  }
}

- (void)makeRequestWithLong:(jlong)maxTotalRequests
                   withLong:(jlong)previousTotalRequests {
  jlong ur = maxUpstreamRequested_;
  id<RxProducer> p = JreLoadVolatileId(&producer_ReplaySubscriber_);
  jlong diff = maxTotalRequests - previousTotalRequests;
  if (diff != 0) {
    maxChildRequested_ = maxTotalRequests;
    if (p != nil) {
      if (ur != 0LL) {
        maxUpstreamRequested_ = 0LL;
        [p requestWithLong:ur + diff];
      }
      else {
        [p requestWithLong:diff];
      }
    }
    else {
      jlong u = ur + diff;
      if (u < 0) {
        u = JavaLangLong_MAX_VALUE;
      }
      maxUpstreamRequested_ = u;
    }
  }
  else if (ur != 0LL && p != nil) {
    maxUpstreamRequested_ = 0LL;
    [p requestWithLong:ur];
  }
}

- (void)replay {
  IOSObjectArray *pc = producersCache_;
  if (producersCacheVersion_ != JreLoadVolatileLong(&producersVersion_)) {
    @synchronized(producers_) {
      pc = producersCache_;
      IOSObjectArray *a = [((RxInternalUtilOpenHashSet *) nil_chk(producers_)) values];
      jint n = ((IOSObjectArray *) nil_chk(a))->size_;
      if (((IOSObjectArray *) nil_chk(pc))->size_ != n) {
        pc = [IOSObjectArray newArrayWithLength:n type:RxInternalOperatorsOperatorReplay_InnerProducer_class_()];
        producersCache_ = pc;
      }
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(a, 0, pc, 0, n);
      producersCacheVersion_ = JreLoadVolatileLong(&producersVersion_);
    }
  }
  id<RxInternalOperatorsOperatorReplay_ReplayBuffer> b = buffer_;
  {
    IOSObjectArray *a__ = pc;
    RxInternalOperatorsOperatorReplay_InnerProducer * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    RxInternalOperatorsOperatorReplay_InnerProducer * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      RxInternalOperatorsOperatorReplay_InnerProducer *rp = *b__++;
      if (rp != nil) {
        [((id<RxInternalOperatorsOperatorReplay_ReplayBuffer>) nil_chk(b)) replayWithRxInternalOperatorsOperatorReplay_InnerProducer:rp];
      }
    }
  }
}

- (void)__javaClone:(RxInternalOperatorsOperatorReplay_ReplaySubscriber *)original {
  [super __javaClone:original];
  JreCloneVolatileStrong(&producer_ReplaySubscriber_, &original->producer_ReplaySubscriber_);
}

- (void)dealloc {
  JreReleaseVolatile(&producer_ReplaySubscriber_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithJavaUtilConcurrentAtomicAtomicReference:withRxInternalOperatorsOperatorReplay_ReplayBuffer:", NULL, 0x1, -1, 0, -1, 1, -1, -1 },
    { "init__", "V", 0x0, 2, -1, -1, -1, -1, -1 },
    { "addWithRxInternalOperatorsOperatorReplay_InnerProducer:", "Z", 0x0, 3, 4, -1, 5, -1, -1 },
    { "removeWithRxInternalOperatorsOperatorReplay_InnerProducer:", "V", 0x0, 6, 4, -1, 7, -1, -1 },
    { "setProducerWithRxProducer:", "V", 0x1, 8, 9, -1, -1, -1, -1 },
    { "onNextWithId:", "V", 0x1, 10, 11, -1, 12, -1, -1 },
    { "onErrorWithNSException:", "V", 0x1, 13, 14, -1, -1, -1, -1 },
    { "onCompleted", "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { "manageRequestsWithRxInternalOperatorsOperatorReplay_InnerProducer:", "V", 0x0, 15, 4, -1, 7, -1, -1 },
    { "copyProducers", "[LRxInternalOperatorsOperatorReplay_InnerProducer;", 0x0, -1, -1, -1, -1, -1, -1 },
    { "makeRequestWithLong:withLong:", "V", 0x0, 16, 17, -1, -1, -1, -1 },
    { "replay", "V", 0x0, -1, -1, -1, -1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "buffer_", "LRxInternalOperatorsOperatorReplay_ReplayBuffer;", .constantValue.asLong = 0, 0x10, -1, -1, 18, -1 },
    { "nl_", "LRxInternalOperatorsNotificationLite;", .constantValue.asLong = 0, 0x10, -1, -1, 19, -1 },
    { "done_", "Z", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "EMPTY", "[LRxInternalOperatorsOperatorReplay_InnerProducer;", .constantValue.asLong = 0, 0x18, -1, 20, -1, -1 },
    { "TERMINATED", "[LRxInternalOperatorsOperatorReplay_InnerProducer;", .constantValue.asLong = 0, 0x18, -1, 21, -1, -1 },
    { "terminated_", "Z", .constantValue.asLong = 0, 0x40, -1, -1, -1, -1 },
    { "producers_", "LRxInternalUtilOpenHashSet;", .constantValue.asLong = 0, 0x10, -1, -1, 22, -1 },
    { "producersCache_", "[LRxInternalOperatorsOperatorReplay_InnerProducer;", .constantValue.asLong = 0, 0x0, -1, -1, 23, -1 },
    { "producersVersion_", "J", .constantValue.asLong = 0, 0x40, -1, -1, -1, -1 },
    { "producersCacheVersion_", "J", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "shouldConnect_", "LJavaUtilConcurrentAtomicAtomicBoolean;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "emitting_", "Z", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "missed_", "Z", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "maxChildRequested_", "J", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "maxUpstreamRequested_", "J", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "producer_ReplaySubscriber_", "LRxProducer;", .constantValue.asLong = 0, 0x40, 24, -1, -1, -1 },
    { "coordinationQueue_", "LJavaUtilList;", .constantValue.asLong = 0, 0x0, -1, -1, 25, -1 },
    { "coordinateAll_", "Z", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LJavaUtilConcurrentAtomicAtomicReference;LRxInternalOperatorsOperatorReplay_ReplayBuffer;", "(Ljava/util/concurrent/atomic/AtomicReference<Lrx/internal/operators/OperatorReplay$ReplaySubscriber<TT;>;>;Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;)V", "init", "add", "LRxInternalOperatorsOperatorReplay_InnerProducer;", "(Lrx/internal/operators/OperatorReplay$InnerProducer<TT;>;)Z", "remove", "(Lrx/internal/operators/OperatorReplay$InnerProducer<TT;>;)V", "setProducer", "LRxProducer;", "onNext", "LNSObject;", "(TT;)V", "onError", "LNSException;", "manageRequests", "makeRequest", "JJ", "Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;", "Lrx/internal/operators/NotificationLite<TT;>;", &RxInternalOperatorsOperatorReplay_ReplaySubscriber_EMPTY, &RxInternalOperatorsOperatorReplay_ReplaySubscriber_TERMINATED, "Lrx/internal/util/OpenHashSet<Lrx/internal/operators/OperatorReplay$InnerProducer<TT;>;>;", "[Lrx/internal/operators/OperatorReplay$InnerProducer<TT;>;", "producer", "Ljava/util/List<Lrx/internal/operators/OperatorReplay$InnerProducer<TT;>;>;", "LRxInternalOperatorsOperatorReplay;", "<T:Ljava/lang/Object;>Lrx/Subscriber<TT;>;Lrx/Subscription;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_ReplaySubscriber = { "ReplaySubscriber", "rx.internal.operators", ptrTable, methods, fields, 7, 0x18, 12, 18, 26, -1, -1, 27, -1 };
  return &_RxInternalOperatorsOperatorReplay_ReplaySubscriber;
}

+ (void)initialize {
  if (self == [RxInternalOperatorsOperatorReplay_ReplaySubscriber class]) {
    RxInternalOperatorsOperatorReplay_ReplaySubscriber_EMPTY = [IOSObjectArray newArrayWithLength:0 type:RxInternalOperatorsOperatorReplay_InnerProducer_class_()];
    RxInternalOperatorsOperatorReplay_ReplaySubscriber_TERMINATED = [IOSObjectArray newArrayWithLength:0 type:RxInternalOperatorsOperatorReplay_InnerProducer_class_()];
    J2OBJC_SET_INITIALIZED(RxInternalOperatorsOperatorReplay_ReplaySubscriber)
  }
}

@end

void RxInternalOperatorsOperatorReplay_ReplaySubscriber_initWithJavaUtilConcurrentAtomicAtomicReference_withRxInternalOperatorsOperatorReplay_ReplayBuffer_(RxInternalOperatorsOperatorReplay_ReplaySubscriber *self, JavaUtilConcurrentAtomicAtomicReference *current, id<RxInternalOperatorsOperatorReplay_ReplayBuffer> buffer) {
  RxSubscriber_init(self);
  self->buffer_ = buffer;
  self->nl_ = RxInternalOperatorsNotificationLite_instance();
  self->producers_ = new_RxInternalUtilOpenHashSet_init();
  self->producersCache_ = RxInternalOperatorsOperatorReplay_ReplaySubscriber_EMPTY;
  self->shouldConnect_ = new_JavaUtilConcurrentAtomicAtomicBoolean_init();
  [self requestWithLong:0];
}

RxInternalOperatorsOperatorReplay_ReplaySubscriber *new_RxInternalOperatorsOperatorReplay_ReplaySubscriber_initWithJavaUtilConcurrentAtomicAtomicReference_withRxInternalOperatorsOperatorReplay_ReplayBuffer_(JavaUtilConcurrentAtomicAtomicReference *current, id<RxInternalOperatorsOperatorReplay_ReplayBuffer> buffer) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_ReplaySubscriber, initWithJavaUtilConcurrentAtomicAtomicReference_withRxInternalOperatorsOperatorReplay_ReplayBuffer_, current, buffer)
}

RxInternalOperatorsOperatorReplay_ReplaySubscriber *create_RxInternalOperatorsOperatorReplay_ReplaySubscriber_initWithJavaUtilConcurrentAtomicAtomicReference_withRxInternalOperatorsOperatorReplay_ReplayBuffer_(JavaUtilConcurrentAtomicAtomicReference *current, id<RxInternalOperatorsOperatorReplay_ReplayBuffer> buffer) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_ReplaySubscriber, initWithJavaUtilConcurrentAtomicAtomicReference_withRxInternalOperatorsOperatorReplay_ReplayBuffer_, current, buffer)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_ReplaySubscriber)

@implementation RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1

- (void)call {
  if (!JreLoadVolatileBoolean(&this$0_->terminated_)) {
    @synchronized(this$0_->producers_) {
      if (!JreLoadVolatileBoolean(&this$0_->terminated_)) {
        [((RxInternalUtilOpenHashSet *) nil_chk(this$0_->producers_)) terminate];
        this$0_->producersVersion_++;
        JreAssignVolatileBoolean(&this$0_->terminated_, true);
      }
    }
  }
}

- (instancetype)initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber:(RxInternalOperatorsOperatorReplay_ReplaySubscriber *)outer$ {
  RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "call", "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { "initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber:", NULL, 0x0, -1, 0, -1, -1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LRxInternalOperatorsOperatorReplay_ReplaySubscriber;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LRxInternalOperatorsOperatorReplay_ReplaySubscriber;", "init__" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1 = { "", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8008, 2, 1, 0, -1, 1, -1, -1 };
  return &_RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1;
}

@end

void RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_(RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1 *self, RxInternalOperatorsOperatorReplay_ReplaySubscriber *outer$) {
  self->this$0_ = outer$;
  NSObject_init(self);
}

RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1 *new_RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_(RxInternalOperatorsOperatorReplay_ReplaySubscriber *outer$) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1, initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_, outer$)
}

RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1 *create_RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_(RxInternalOperatorsOperatorReplay_ReplaySubscriber *outer$) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1, initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_, outer$)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_ReplaySubscriber_$1)

@implementation RxInternalOperatorsOperatorReplay_InnerProducer

+ (jlong)UNSUBSCRIBED {
  return RxInternalOperatorsOperatorReplay_InnerProducer_UNSUBSCRIBED;
}

- (instancetype)initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber:(RxInternalOperatorsOperatorReplay_ReplaySubscriber *)parent
                                                          withRxSubscriber:(RxSubscriber *)child {
  RxInternalOperatorsOperatorReplay_InnerProducer_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_withRxSubscriber_(self, parent, child);
  return self;
}

- (void)requestWithLong:(jlong)n {
  if (n < 0) {
    return;
  }
  for (; ; ) {
    jlong r = [self get];
    if (r == RxInternalOperatorsOperatorReplay_InnerProducer_UNSUBSCRIBED) {
      return;
    }
    if (r >= 0LL && n == 0) {
      return;
    }
    jlong u = r + n;
    if (u < 0) {
      u = JavaLangLong_MAX_VALUE;
    }
    if ([self compareAndSetWithLong:r withLong:u]) {
      [self addTotalRequestedWithLong:n];
      [((RxInternalOperatorsOperatorReplay_ReplaySubscriber *) nil_chk(parent_)) manageRequestsWithRxInternalOperatorsOperatorReplay_InnerProducer:self];
      [((id<RxInternalOperatorsOperatorReplay_ReplayBuffer>) nil_chk(parent_->buffer_)) replayWithRxInternalOperatorsOperatorReplay_InnerProducer:self];
      return;
    }
  }
}

- (void)addTotalRequestedWithLong:(jlong)n {
  for (; ; ) {
    jlong r = [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(totalRequested_)) get];
    jlong u = r + n;
    if (u < 0) {
      u = JavaLangLong_MAX_VALUE;
    }
    if ([totalRequested_ compareAndSetWithLong:r withLong:u]) {
      return;
    }
  }
}

- (jlong)producedWithLong:(jlong)n {
  if (n <= 0) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"Cant produce zero or less");
  }
  for (; ; ) {
    jlong r = [self get];
    if (r == RxInternalOperatorsOperatorReplay_InnerProducer_UNSUBSCRIBED) {
      return RxInternalOperatorsOperatorReplay_InnerProducer_UNSUBSCRIBED;
    }
    jlong u = r - n;
    if (u < 0) {
      @throw new_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$J$JC", @"More produced (", n, @") than requested (", r, ')'));
    }
    if ([self compareAndSetWithLong:r withLong:u]) {
      return u;
    }
  }
}

- (jboolean)isUnsubscribed {
  return [self get] == RxInternalOperatorsOperatorReplay_InnerProducer_UNSUBSCRIBED;
}

- (void)unsubscribe {
  jlong r = [self get];
  if (r != RxInternalOperatorsOperatorReplay_InnerProducer_UNSUBSCRIBED) {
    r = [self getAndSetWithLong:RxInternalOperatorsOperatorReplay_InnerProducer_UNSUBSCRIBED];
    if (r != RxInternalOperatorsOperatorReplay_InnerProducer_UNSUBSCRIBED) {
      [((RxInternalOperatorsOperatorReplay_ReplaySubscriber *) nil_chk(parent_)) removeWithRxInternalOperatorsOperatorReplay_InnerProducer:self];
      [parent_ manageRequestsWithRxInternalOperatorsOperatorReplay_InnerProducer:self];
    }
  }
}

- (id)index {
  return index_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber:withRxSubscriber:", NULL, 0x1, -1, 0, -1, 1, -1, -1 },
    { "requestWithLong:", "V", 0x1, 2, 3, -1, -1, -1, -1 },
    { "addTotalRequestedWithLong:", "V", 0x0, 4, 3, -1, -1, -1, -1 },
    { "producedWithLong:", "J", 0x1, 5, 3, -1, -1, -1, -1 },
    { "isUnsubscribed", "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { "unsubscribe", "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { "index", "LNSObject;", 0x0, -1, -1, -1, 6, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID", "J", .constantValue.asLong = RxInternalOperatorsOperatorReplay_InnerProducer_serialVersionUID, 0x1a, -1, -1, -1, -1 },
    { "parent_", "LRxInternalOperatorsOperatorReplay_ReplaySubscriber;", .constantValue.asLong = 0, 0x10, -1, -1, 7, -1 },
    { "child_", "LRxSubscriber;", .constantValue.asLong = 0, 0x10, -1, -1, 8, -1 },
    { "index_", "LNSObject;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "totalRequested_", "LJavaUtilConcurrentAtomicAtomicLong;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "emitting_", "Z", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "missed_", "Z", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "UNSUBSCRIBED", "J", .constantValue.asLong = RxInternalOperatorsOperatorReplay_InnerProducer_UNSUBSCRIBED, 0x18, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LRxInternalOperatorsOperatorReplay_ReplaySubscriber;LRxSubscriber;", "(Lrx/internal/operators/OperatorReplay$ReplaySubscriber<TT;>;Lrx/Subscriber<-TT;>;)V", "request", "J", "addTotalRequested", "produced", "<U:Ljava/lang/Object;>()TU;", "Lrx/internal/operators/OperatorReplay$ReplaySubscriber<TT;>;", "Lrx/Subscriber<-TT;>;", "LRxInternalOperatorsOperatorReplay;", "<T:Ljava/lang/Object;>Ljava/util/concurrent/atomic/AtomicLong;Lrx/Producer;Lrx/Subscription;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_InnerProducer = { "InnerProducer", "rx.internal.operators", ptrTable, methods, fields, 7, 0x18, 7, 8, 9, -1, -1, 10, -1 };
  return &_RxInternalOperatorsOperatorReplay_InnerProducer;
}

@end

void RxInternalOperatorsOperatorReplay_InnerProducer_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_withRxSubscriber_(RxInternalOperatorsOperatorReplay_InnerProducer *self, RxInternalOperatorsOperatorReplay_ReplaySubscriber *parent, RxSubscriber *child) {
  JavaUtilConcurrentAtomicAtomicLong_init(self);
  self->parent_ = parent;
  self->child_ = child;
  self->totalRequested_ = new_JavaUtilConcurrentAtomicAtomicLong_init();
}

RxInternalOperatorsOperatorReplay_InnerProducer *new_RxInternalOperatorsOperatorReplay_InnerProducer_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_withRxSubscriber_(RxInternalOperatorsOperatorReplay_ReplaySubscriber *parent, RxSubscriber *child) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_InnerProducer, initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_withRxSubscriber_, parent, child)
}

RxInternalOperatorsOperatorReplay_InnerProducer *create_RxInternalOperatorsOperatorReplay_InnerProducer_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_withRxSubscriber_(RxInternalOperatorsOperatorReplay_ReplaySubscriber *parent, RxSubscriber *child) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_InnerProducer, initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_withRxSubscriber_, parent, child)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_InnerProducer)

@implementation RxInternalOperatorsOperatorReplay_ReplayBuffer

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "nextWithId:", "V", 0x401, 0, 1, -1, 2, -1, -1 },
    { "errorWithNSException:", "V", 0x401, 3, 4, -1, -1, -1, -1 },
    { "complete", "V", 0x401, -1, -1, -1, -1, -1, -1 },
    { "replayWithRxInternalOperatorsOperatorReplay_InnerProducer:", "V", 0x401, 5, 6, -1, 7, -1, -1 },
  };
  static const void *ptrTable[] = { "next", "LNSObject;", "(TT;)V", "error", "LNSException;", "replay", "LRxInternalOperatorsOperatorReplay_InnerProducer;", "(Lrx/internal/operators/OperatorReplay$InnerProducer<TT;>;)V", "LRxInternalOperatorsOperatorReplay;", "<T:Ljava/lang/Object;>Ljava/lang/Object;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_ReplayBuffer = { "ReplayBuffer", "rx.internal.operators", ptrTable, methods, NULL, 7, 0x608, 4, 0, 8, -1, -1, 9, -1 };
  return &_RxInternalOperatorsOperatorReplay_ReplayBuffer;
}

@end

J2OBJC_INTERFACE_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_ReplayBuffer)

@implementation RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer

- (instancetype)initWithInt:(jint)capacityHint {
  RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer_initWithInt_(self, capacityHint);
  return self;
}

- (void)nextWithId:(id)value {
  [self addWithId:[((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) nextWithId:value]];
  size_UnboundedReplayBuffer_++;
}

- (void)errorWithNSException:(NSException *)e {
  [self addWithId:[((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) errorWithNSException:e]];
  size_UnboundedReplayBuffer_++;
}

- (void)complete {
  [self addWithId:[((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) completed]];
  size_UnboundedReplayBuffer_++;
}

- (void)replayWithRxInternalOperatorsOperatorReplay_InnerProducer:(RxInternalOperatorsOperatorReplay_InnerProducer *)output {
  @synchronized(output) {
    if (((RxInternalOperatorsOperatorReplay_InnerProducer *) nil_chk(output))->emitting_) {
      output->missed_ = true;
      return;
    }
    output->emitting_ = true;
  }
  for (; ; ) {
    if ([output isUnsubscribed]) {
      return;
    }
    jint sourceIndex = JreLoadVolatileInt(&size_UnboundedReplayBuffer_);
    JavaLangInteger *destIndexObject = [output index];
    jint destIndex = destIndexObject != nil ? [destIndexObject intValue] : 0;
    jlong r = [output get];
    jlong r0 = r;
    jlong e = 0LL;
    while (r != 0LL && destIndex < sourceIndex) {
      id o = [self getWithInt:destIndex];
      @try {
        if ([((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) acceptWithRxObserver:output->child_ withId:o]) {
          return;
        }
      }
      @catch (NSException *err) {
        RxExceptionsExceptions_throwIfFatalWithNSException_(err);
        [output unsubscribe];
        if (![nl_ isErrorWithId:o] && ![nl_ isCompletedWithId:o]) {
          [((RxSubscriber *) nil_chk(output->child_)) onErrorWithNSException:RxExceptionsOnErrorThrowable_addValueAsLastCauseWithNSException_withId_(err, [nl_ getValueWithId:o])];
        }
        return;
      }
      if ([output isUnsubscribed]) {
        return;
      }
      destIndex++;
      r--;
      e++;
    }
    if (e != 0LL) {
      output->index_ = JavaLangInteger_valueOfWithInt_(destIndex);
      if (r0 != JavaLangLong_MAX_VALUE) {
        [output producedWithLong:e];
      }
    }
    @synchronized(output) {
      if (!output->missed_) {
        output->emitting_ = false;
        return;
      }
      output->missed_ = false;
    }
  }
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { "nextWithId:", "V", 0x1, 1, 2, -1, 3, -1, -1 },
    { "errorWithNSException:", "V", 0x1, 4, 5, -1, -1, -1, -1 },
    { "complete", "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { "replayWithRxInternalOperatorsOperatorReplay_InnerProducer:", "V", 0x1, 6, 7, -1, 8, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID", "J", .constantValue.asLong = RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer_serialVersionUID, 0x1a, -1, -1, -1, -1 },
    { "nl_", "LRxInternalOperatorsNotificationLite;", .constantValue.asLong = 0, 0x10, -1, -1, 9, -1 },
    { "size_UnboundedReplayBuffer_", "I", .constantValue.asLong = 0, 0x40, 10, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "I", "next", "LNSObject;", "(TT;)V", "error", "LNSException;", "replay", "LRxInternalOperatorsOperatorReplay_InnerProducer;", "(Lrx/internal/operators/OperatorReplay$InnerProducer<TT;>;)V", "Lrx/internal/operators/NotificationLite<TT;>;", "size", "LRxInternalOperatorsOperatorReplay;", "<T:Ljava/lang/Object;>Ljava/util/ArrayList<Ljava/lang/Object;>;Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer = { "UnboundedReplayBuffer", "rx.internal.operators", ptrTable, methods, fields, 7, 0x18, 5, 3, 11, -1, -1, 12, -1 };
  return &_RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer;
}

@end

void RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer_initWithInt_(RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer *self, jint capacityHint) {
  JavaUtilArrayList_initWithInt_(self, capacityHint);
  self->nl_ = RxInternalOperatorsNotificationLite_instance();
}

RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer *new_RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer_initWithInt_(jint capacityHint) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer, initWithInt_, capacityHint)
}

RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer *create_RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer_initWithInt_(jint capacityHint) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer, initWithInt_, capacityHint)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer)

@implementation RxInternalOperatorsOperatorReplay_Node

- (instancetype)initWithId:(id)value
                  withLong:(jlong)index {
  RxInternalOperatorsOperatorReplay_Node_initWithId_withLong_(self, value, index);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithId:withLong:", NULL, 0x1, -1, 0, -1, -1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID", "J", .constantValue.asLong = RxInternalOperatorsOperatorReplay_Node_serialVersionUID, 0x1a, -1, -1, -1, -1 },
    { "value_Node_", "LNSObject;", .constantValue.asLong = 0, 0x10, 1, -1, -1, -1 },
    { "index_", "J", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LNSObject;J", "value", "LRxInternalOperatorsOperatorReplay;", "Ljava/util/concurrent/atomic/AtomicReference<Lrx/internal/operators/OperatorReplay$Node;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_Node = { "Node", "rx.internal.operators", ptrTable, methods, fields, 7, 0x18, 1, 3, 2, -1, -1, 3, -1 };
  return &_RxInternalOperatorsOperatorReplay_Node;
}

@end

void RxInternalOperatorsOperatorReplay_Node_initWithId_withLong_(RxInternalOperatorsOperatorReplay_Node *self, id value, jlong index) {
  JavaUtilConcurrentAtomicAtomicReference_init(self);
  self->value_Node_ = value;
  self->index_ = index;
}

RxInternalOperatorsOperatorReplay_Node *new_RxInternalOperatorsOperatorReplay_Node_initWithId_withLong_(id value, jlong index) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_Node, initWithId_withLong_, value, index)
}

RxInternalOperatorsOperatorReplay_Node *create_RxInternalOperatorsOperatorReplay_Node_initWithId_withLong_(id value, jlong index) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_Node, initWithId_withLong_, value, index)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_Node)

@implementation RxInternalOperatorsOperatorReplay_BoundedReplayBuffer

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)addLastWithRxInternalOperatorsOperatorReplay_Node:(RxInternalOperatorsOperatorReplay_Node *)n {
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_addLastWithRxInternalOperatorsOperatorReplay_Node_(self, n);
}

- (void)removeFirst {
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_removeFirst(self);
}

- (void)removeSomeWithInt:(jint)n {
  RxInternalOperatorsOperatorReplay_Node *head = [self get];
  while (n > 0) {
    head = [((RxInternalOperatorsOperatorReplay_Node *) nil_chk(head)) get];
    n--;
    size_--;
  }
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_setFirstWithRxInternalOperatorsOperatorReplay_Node_(self, head);
}

- (void)setFirstWithRxInternalOperatorsOperatorReplay_Node:(RxInternalOperatorsOperatorReplay_Node *)n {
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_setFirstWithRxInternalOperatorsOperatorReplay_Node_(self, n);
}

- (void)nextWithId:(id)value {
  id o = [self enterTransformWithId:[((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) nextWithId:value]];
  RxInternalOperatorsOperatorReplay_Node *n = new_RxInternalOperatorsOperatorReplay_Node_initWithId_withLong_(o, ++index_);
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_addLastWithRxInternalOperatorsOperatorReplay_Node_(self, n);
  [self truncate];
}

- (void)errorWithNSException:(NSException *)e {
  id o = [self enterTransformWithId:[((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) errorWithNSException:e]];
  RxInternalOperatorsOperatorReplay_Node *n = new_RxInternalOperatorsOperatorReplay_Node_initWithId_withLong_(o, ++index_);
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_addLastWithRxInternalOperatorsOperatorReplay_Node_(self, n);
  [self truncateFinal];
}

- (void)complete {
  id o = [self enterTransformWithId:[((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) completed]];
  RxInternalOperatorsOperatorReplay_Node *n = new_RxInternalOperatorsOperatorReplay_Node_initWithId_withLong_(o, ++index_);
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_addLastWithRxInternalOperatorsOperatorReplay_Node_(self, n);
  [self truncateFinal];
}

- (void)replayWithRxInternalOperatorsOperatorReplay_InnerProducer:(RxInternalOperatorsOperatorReplay_InnerProducer *)output {
  @synchronized(output) {
    if (((RxInternalOperatorsOperatorReplay_InnerProducer *) nil_chk(output))->emitting_) {
      output->missed_ = true;
      return;
    }
    output->emitting_ = true;
  }
  for (; ; ) {
    if ([output isUnsubscribed]) {
      return;
    }
    jlong r = [output get];
    jboolean unbounded = r == JavaLangLong_MAX_VALUE;
    jlong e = 0LL;
    RxInternalOperatorsOperatorReplay_Node *node = [output index];
    if (node == nil) {
      node = [self get];
      output->index_ = node;
      [output addTotalRequestedWithLong:((RxInternalOperatorsOperatorReplay_Node *) nil_chk(node))->index_];
    }
    if ([output isUnsubscribed]) {
      return;
    }
    while (r != 0) {
      RxInternalOperatorsOperatorReplay_Node *v = [node get];
      if (v != nil) {
        id o = [self leaveTransformWithId:v->value_Node_];
        @try {
          if ([((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) acceptWithRxObserver:output->child_ withId:o]) {
            output->index_ = nil;
            return;
          }
        }
        @catch (NSException *err) {
          output->index_ = nil;
          RxExceptionsExceptions_throwIfFatalWithNSException_(err);
          [output unsubscribe];
          if (![nl_ isErrorWithId:o] && ![nl_ isCompletedWithId:o]) {
            [((RxSubscriber *) nil_chk(output->child_)) onErrorWithNSException:RxExceptionsOnErrorThrowable_addValueAsLastCauseWithNSException_withId_(err, [nl_ getValueWithId:o])];
          }
          return;
        }
        e++;
        r--;
        node = v;
      }
      else {
        break;
      }
      if ([output isUnsubscribed]) {
        return;
      }
    }
    if (e != 0LL) {
      output->index_ = node;
      if (!unbounded) {
        [output producedWithLong:e];
      }
    }
    @synchronized(output) {
      if (!output->missed_) {
        output->emitting_ = false;
        return;
      }
      output->missed_ = false;
    }
  }
}

- (id)enterTransformWithId:(id)value {
  return value;
}

- (id)leaveTransformWithId:(id)value {
  return value;
}

- (void)truncate {
}

- (void)truncateFinal {
}

- (void)collectWithJavaUtilCollection:(id<JavaUtilCollection>)output {
  RxInternalOperatorsOperatorReplay_Node *n = [self get];
  for (; ; ) {
    RxInternalOperatorsOperatorReplay_Node *next = [((RxInternalOperatorsOperatorReplay_Node *) nil_chk(n)) get];
    if (next != nil) {
      id o = next->value_Node_;
      id v = [self leaveTransformWithId:o];
      if ([((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) isCompletedWithId:v] || [nl_ isErrorWithId:v]) {
        break;
      }
      [((id<JavaUtilCollection>) nil_chk(output)) addWithId:[nl_ getValueWithId:v]];
      n = next;
    }
    else {
      break;
    }
  }
}

- (jboolean)hasError {
  return ((RxInternalOperatorsOperatorReplay_Node *) nil_chk(tail_))->value_Node_ != nil && [((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) isErrorWithId:[self leaveTransformWithId:tail_->value_Node_]];
}

- (jboolean)hasCompleted {
  return ((RxInternalOperatorsOperatorReplay_Node *) nil_chk(tail_))->value_Node_ != nil && [((RxInternalOperatorsNotificationLite *) nil_chk(nl_)) isCompletedWithId:[self leaveTransformWithId:tail_->value_Node_]];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { "addLastWithRxInternalOperatorsOperatorReplay_Node:", "V", 0x10, 0, 1, -1, -1, -1, -1 },
    { "removeFirst", "V", 0x10, -1, -1, -1, -1, -1, -1 },
    { "removeSomeWithInt:", "V", 0x10, 2, 3, -1, -1, -1, -1 },
    { "setFirstWithRxInternalOperatorsOperatorReplay_Node:", "V", 0x10, 4, 1, -1, -1, -1, -1 },
    { "nextWithId:", "V", 0x11, 5, 6, -1, 7, -1, -1 },
    { "errorWithNSException:", "V", 0x11, 8, 9, -1, -1, -1, -1 },
    { "complete", "V", 0x11, -1, -1, -1, -1, -1, -1 },
    { "replayWithRxInternalOperatorsOperatorReplay_InnerProducer:", "V", 0x11, 10, 11, -1, 12, -1, -1 },
    { "enterTransformWithId:", "LNSObject;", 0x0, 13, 6, -1, -1, -1, -1 },
    { "leaveTransformWithId:", "LNSObject;", 0x0, 14, 6, -1, -1, -1, -1 },
    { "truncate", "V", 0x0, -1, -1, -1, -1, -1, -1 },
    { "truncateFinal", "V", 0x0, -1, -1, -1, -1, -1, -1 },
    { "collectWithJavaUtilCollection:", "V", 0x10, 15, 16, -1, 17, -1, -1 },
    { "hasError", "Z", 0x0, -1, -1, -1, -1, -1, -1 },
    { "hasCompleted", "Z", 0x0, -1, -1, -1, -1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID", "J", .constantValue.asLong = RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_serialVersionUID, 0x1a, -1, -1, -1, -1 },
    { "nl_", "LRxInternalOperatorsNotificationLite;", .constantValue.asLong = 0, 0x10, -1, -1, 18, -1 },
    { "tail_", "LRxInternalOperatorsOperatorReplay_Node;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "size_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "index_", "J", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "addLast", "LRxInternalOperatorsOperatorReplay_Node;", "removeSome", "I", "setFirst", "next", "LNSObject;", "(TT;)V", "error", "LNSException;", "replay", "LRxInternalOperatorsOperatorReplay_InnerProducer;", "(Lrx/internal/operators/OperatorReplay$InnerProducer<TT;>;)V", "enterTransform", "leaveTransform", "collect", "LJavaUtilCollection;", "(Ljava/util/Collection<-TT;>;)V", "Lrx/internal/operators/NotificationLite<TT;>;", "LRxInternalOperatorsOperatorReplay;", "<T:Ljava/lang/Object;>Ljava/util/concurrent/atomic/AtomicReference<Lrx/internal/operators/OperatorReplay$Node;>;Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_BoundedReplayBuffer = { "BoundedReplayBuffer", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8, 16, 5, 19, -1, -1, 20, -1 };
  return &_RxInternalOperatorsOperatorReplay_BoundedReplayBuffer;
}

@end

void RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_init(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer *self) {
  JavaUtilConcurrentAtomicAtomicReference_init(self);
  self->nl_ = RxInternalOperatorsNotificationLite_instance();
  RxInternalOperatorsOperatorReplay_Node *n = new_RxInternalOperatorsOperatorReplay_Node_initWithId_withLong_(nil, 0);
  self->tail_ = n;
  [self setWithId:n];
}

RxInternalOperatorsOperatorReplay_BoundedReplayBuffer *new_RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_init() {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer, init)
}

RxInternalOperatorsOperatorReplay_BoundedReplayBuffer *create_RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_init() {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer, init)
}

void RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_addLastWithRxInternalOperatorsOperatorReplay_Node_(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer *self, RxInternalOperatorsOperatorReplay_Node *n) {
  [((RxInternalOperatorsOperatorReplay_Node *) nil_chk(self->tail_)) setWithId:n];
  self->tail_ = n;
  self->size_++;
}

void RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_removeFirst(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer *self) {
  RxInternalOperatorsOperatorReplay_Node *head = [self get];
  RxInternalOperatorsOperatorReplay_Node *next = [((RxInternalOperatorsOperatorReplay_Node *) nil_chk(head)) get];
  if (next == nil) {
    @throw new_JavaLangIllegalStateException_initWithNSString_(@"Empty list!");
  }
  self->size_--;
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_setFirstWithRxInternalOperatorsOperatorReplay_Node_(self, next);
}

void RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_setFirstWithRxInternalOperatorsOperatorReplay_Node_(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer *self, RxInternalOperatorsOperatorReplay_Node *n) {
  [self setWithId:n];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_BoundedReplayBuffer)

@implementation RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer

- (instancetype)initWithInt:(jint)limit {
  RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer_initWithInt_(self, limit);
  return self;
}

- (void)truncate {
  if (size_ > limit_) {
    RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_removeFirst(self);
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { "truncate", "V", 0x0, -1, -1, -1, -1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID", "J", .constantValue.asLong = RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer_serialVersionUID, 0x1a, -1, -1, -1, -1 },
    { "limit_", "I", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "I", "LRxInternalOperatorsOperatorReplay;", "<T:Ljava/lang/Object;>Lrx/internal/operators/OperatorReplay$BoundedReplayBuffer<TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer = { "SizeBoundReplayBuffer", "rx.internal.operators", ptrTable, methods, fields, 7, 0x18, 2, 2, 1, -1, -1, 2, -1 };
  return &_RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer;
}

@end

void RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer_initWithInt_(RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer *self, jint limit) {
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_init(self);
  self->limit_ = limit;
}

RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer *new_RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer_initWithInt_(jint limit) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer, initWithInt_, limit)
}

RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer *create_RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer_initWithInt_(jint limit) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer, initWithInt_, limit)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer)

@implementation RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer

- (instancetype)initWithInt:(jint)limit
                   withLong:(jlong)maxAgeInMillis
            withRxScheduler:(RxScheduler *)scheduler {
  RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer_initWithInt_withLong_withRxScheduler_(self, limit, maxAgeInMillis, scheduler);
  return self;
}

- (id)enterTransformWithId:(id)value {
  return new_RxSchedulersTimestamped_initWithLong_withId_([((RxScheduler *) nil_chk(scheduler_)) now], value);
}

- (id)leaveTransformWithId:(id)value {
  return [((RxSchedulersTimestamped *) nil_chk(((RxSchedulersTimestamped *) cast_chk(value, [RxSchedulersTimestamped class])))) getValue];
}

- (void)truncate {
  jlong timeLimit = [((RxScheduler *) nil_chk(scheduler_)) now] - maxAgeInMillis_;
  RxInternalOperatorsOperatorReplay_Node *prev = [self get];
  RxInternalOperatorsOperatorReplay_Node *next = [((RxInternalOperatorsOperatorReplay_Node *) nil_chk(prev)) get];
  jint e = 0;
  for (; ; ) {
    if (next != nil) {
      if (size_ > limit_) {
        e++;
        size_--;
        prev = next;
        next = [next get];
      }
      else {
        RxSchedulersTimestamped *v = (RxSchedulersTimestamped *) cast_chk(next->value_Node_, [RxSchedulersTimestamped class]);
        if ([((RxSchedulersTimestamped *) nil_chk(v)) getTimestampMillis] <= timeLimit) {
          e++;
          size_--;
          prev = next;
          next = [next get];
        }
        else {
          break;
        }
      }
    }
    else {
      break;
    }
  }
  if (e != 0) {
    RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_setFirstWithRxInternalOperatorsOperatorReplay_Node_(self, prev);
  }
}

- (void)truncateFinal {
  jlong timeLimit = [((RxScheduler *) nil_chk(scheduler_)) now] - maxAgeInMillis_;
  RxInternalOperatorsOperatorReplay_Node *prev = [self get];
  RxInternalOperatorsOperatorReplay_Node *next = [((RxInternalOperatorsOperatorReplay_Node *) nil_chk(prev)) get];
  jint e = 0;
  for (; ; ) {
    if (next != nil && size_ > 1) {
      RxSchedulersTimestamped *v = (RxSchedulersTimestamped *) cast_chk(next->value_Node_, [RxSchedulersTimestamped class]);
      if ([((RxSchedulersTimestamped *) nil_chk(v)) getTimestampMillis] <= timeLimit) {
        e++;
        size_--;
        prev = next;
        next = [next get];
      }
      else {
        break;
      }
    }
    else {
      break;
    }
  }
  if (e != 0) {
    RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_setFirstWithRxInternalOperatorsOperatorReplay_Node_(self, prev);
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withLong:withRxScheduler:", NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { "enterTransformWithId:", "LNSObject;", 0x0, 1, 2, -1, -1, -1, -1 },
    { "leaveTransformWithId:", "LNSObject;", 0x0, 3, 2, -1, -1, -1, -1 },
    { "truncate", "V", 0x0, -1, -1, -1, -1, -1, -1 },
    { "truncateFinal", "V", 0x0, -1, -1, -1, -1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID", "J", .constantValue.asLong = RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer_serialVersionUID, 0x1a, -1, -1, -1, -1 },
    { "scheduler_", "LRxScheduler;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "maxAgeInMillis_", "J", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "limit_", "I", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "IJLRxScheduler;", "enterTransform", "LNSObject;", "leaveTransform", "LRxInternalOperatorsOperatorReplay;", "<T:Ljava/lang/Object;>Lrx/internal/operators/OperatorReplay$BoundedReplayBuffer<TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer = { "SizeAndTimeBoundReplayBuffer", "rx.internal.operators", ptrTable, methods, fields, 7, 0x18, 5, 4, 4, -1, -1, 5, -1 };
  return &_RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer;
}

@end

void RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer_initWithInt_withLong_withRxScheduler_(RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer *self, jint limit, jlong maxAgeInMillis, RxScheduler *scheduler) {
  RxInternalOperatorsOperatorReplay_BoundedReplayBuffer_init(self);
  self->scheduler_ = scheduler;
  self->limit_ = limit;
  self->maxAgeInMillis_ = maxAgeInMillis;
}

RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer *new_RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer_initWithInt_withLong_withRxScheduler_(jint limit, jlong maxAgeInMillis, RxScheduler *scheduler) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer, initWithInt_withLong_withRxScheduler_, limit, maxAgeInMillis, scheduler)
}

RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer *create_RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer_initWithInt_withLong_withRxScheduler_(jint limit, jlong maxAgeInMillis, RxScheduler *scheduler) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer, initWithInt_withLong_withRxScheduler_, limit, maxAgeInMillis, scheduler)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer)

@implementation RxInternalOperatorsOperatorReplay_$1

- (id)call {
  return new_RxInternalOperatorsOperatorReplay_UnboundedReplayBuffer_initWithInt_(16);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  RxInternalOperatorsOperatorReplay_$1_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "call", "LNSObject;", 0x1, -1, -1, -1, -1, -1, -1 },
    { "init", NULL, 0x0, -1, -1, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LRxInternalOperatorsOperatorReplay;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_$1 = { "", "rx.internal.operators", ptrTable, methods, NULL, 7, 0x8008, 2, 0, 0, -1, -1, -1, -1 };
  return &_RxInternalOperatorsOperatorReplay_$1;
}

@end

void RxInternalOperatorsOperatorReplay_$1_init(RxInternalOperatorsOperatorReplay_$1 *self) {
  NSObject_init(self);
}

RxInternalOperatorsOperatorReplay_$1 *new_RxInternalOperatorsOperatorReplay_$1_init() {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_$1, init)
}

RxInternalOperatorsOperatorReplay_$1 *create_RxInternalOperatorsOperatorReplay_$1_init() {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_$1, init)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_$1)

@implementation RxInternalOperatorsOperatorReplay_$2

- (void)callWithId:(RxSubscriber *)child {
  RxObservablesConnectableObservable *co;
  RxObservable *observable;
  @try {
    co = [((id<RxFunctionsFunc0>) nil_chk(val$connectableFactory_)) call];
    observable = [((id<RxFunctionsFunc1>) nil_chk(val$selector_)) callWithId:co];
  }
  @catch (NSException *e) {
    RxExceptionsExceptions_throwOrReportWithNSException_withRxObserver_(e, child);
    return;
  }
  (void) [((RxObservable *) nil_chk(observable)) subscribeWithRxSubscriber:child];
  [((RxObservablesConnectableObservable *) nil_chk(co)) connectWithRxFunctionsAction1:new_RxInternalOperatorsOperatorReplay_$2_$1_initWithRxSubscriber_(child)];
}

- (instancetype)initWithRxFunctionsFunc0:(id<RxFunctionsFunc0>)capture$0
                    withRxFunctionsFunc1:(id<RxFunctionsFunc1>)capture$1 {
  RxInternalOperatorsOperatorReplay_$2_initWithRxFunctionsFunc0_withRxFunctionsFunc1_(self, capture$0, capture$1);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithId:", "V", 0x1, 0, 1, -1, 2, -1, -1 },
    { "initWithRxFunctionsFunc0:withRxFunctionsFunc1:", NULL, 0x0, -1, 3, -1, 4, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$connectableFactory_", "LRxFunctionsFunc0;", .constantValue.asLong = 0, 0x1012, -1, -1, 5, -1 },
    { "val$selector_", "LRxFunctionsFunc1;", .constantValue.asLong = 0, 0x1012, -1, -1, 6, -1 },
  };
  static const void *ptrTable[] = { "call", "LRxSubscriber;", "(Lrx/Subscriber<-TR;>;)V", "LRxFunctionsFunc0;LRxFunctionsFunc1;", "(Lrx/functions/Func0<+Lrx/observables/ConnectableObservable<TU;>;>;Lrx/functions/Func1<-Lrx/Observable<TU;>;+Lrx/Observable<TR;>;>;)V", "Lrx/functions/Func0<+Lrx/observables/ConnectableObservable<TU;>;>;", "Lrx/functions/Func1<-Lrx/Observable<TU;>;+Lrx/Observable<TR;>;>;", "LRxInternalOperatorsOperatorReplay;", "multicastSelectorWithRxFunctionsFunc0:withRxFunctionsFunc1:", "Ljava/lang/Object;Lrx/Observable$OnSubscribe<TR;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_$2 = { "", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8008, 2, 2, 7, -1, 8, 9, -1 };
  return &_RxInternalOperatorsOperatorReplay_$2;
}

@end

void RxInternalOperatorsOperatorReplay_$2_initWithRxFunctionsFunc0_withRxFunctionsFunc1_(RxInternalOperatorsOperatorReplay_$2 *self, id<RxFunctionsFunc0> capture$0, id<RxFunctionsFunc1> capture$1) {
  self->val$connectableFactory_ = capture$0;
  self->val$selector_ = capture$1;
  NSObject_init(self);
}

RxInternalOperatorsOperatorReplay_$2 *new_RxInternalOperatorsOperatorReplay_$2_initWithRxFunctionsFunc0_withRxFunctionsFunc1_(id<RxFunctionsFunc0> capture$0, id<RxFunctionsFunc1> capture$1) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_$2, initWithRxFunctionsFunc0_withRxFunctionsFunc1_, capture$0, capture$1)
}

RxInternalOperatorsOperatorReplay_$2 *create_RxInternalOperatorsOperatorReplay_$2_initWithRxFunctionsFunc0_withRxFunctionsFunc1_(id<RxFunctionsFunc0> capture$0, id<RxFunctionsFunc1> capture$1) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_$2, initWithRxFunctionsFunc0_withRxFunctionsFunc1_, capture$0, capture$1)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_$2)

@implementation RxInternalOperatorsOperatorReplay_$2_$1

- (void)callWithId:(id<RxSubscription>)t {
  [((RxSubscriber *) nil_chk(val$child_)) addWithRxSubscription:t];
}

- (instancetype)initWithRxSubscriber:(RxSubscriber *)capture$0 {
  RxInternalOperatorsOperatorReplay_$2_$1_initWithRxSubscriber_(self, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithId:", "V", 0x1, 0, 1, -1, -1, -1, -1 },
    { "initWithRxSubscriber:", NULL, 0x0, -1, 2, -1, 3, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$child_", "LRxSubscriber;", .constantValue.asLong = 0, 0x1012, -1, -1, 4, -1 },
  };
  static const void *ptrTable[] = { "call", "LRxSubscription;", "LRxSubscriber;", "(Lrx/Subscriber<-TR;>;)V", "Lrx/Subscriber<-TR;>;", "LRxInternalOperatorsOperatorReplay_$2;", "callWithId:", "Ljava/lang/Object;Lrx/functions/Action1<Lrx/Subscription;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_$2_$1 = { "", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8008, 2, 1, 5, -1, 6, 7, -1 };
  return &_RxInternalOperatorsOperatorReplay_$2_$1;
}

@end

void RxInternalOperatorsOperatorReplay_$2_$1_initWithRxSubscriber_(RxInternalOperatorsOperatorReplay_$2_$1 *self, RxSubscriber *capture$0) {
  self->val$child_ = capture$0;
  NSObject_init(self);
}

RxInternalOperatorsOperatorReplay_$2_$1 *new_RxInternalOperatorsOperatorReplay_$2_$1_initWithRxSubscriber_(RxSubscriber *capture$0) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_$2_$1, initWithRxSubscriber_, capture$0)
}

RxInternalOperatorsOperatorReplay_$2_$1 *create_RxInternalOperatorsOperatorReplay_$2_$1_initWithRxSubscriber_(RxSubscriber *capture$0) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_$2_$1, initWithRxSubscriber_, capture$0)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_$2_$1)

@implementation RxInternalOperatorsOperatorReplay_$3

- (void)callWithId:(RxSubscriber *)child {
  (void) [((RxObservable *) nil_chk(val$observable_)) unsafeSubscribeWithRxSubscriber:new_RxInternalOperatorsOperatorReplay_$3_$1_initWithRxSubscriber_withRxSubscriber_(child, child)];
}

- (instancetype)initWithRxObservable:(RxObservable *)capture$0 {
  RxInternalOperatorsOperatorReplay_$3_initWithRxObservable_(self, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithId:", "V", 0x1, 0, 1, -1, 2, -1, -1 },
    { "initWithRxObservable:", NULL, 0x0, -1, 3, -1, 4, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$observable_", "LRxObservable;", .constantValue.asLong = 0, 0x1012, -1, -1, 5, -1 },
  };
  static const void *ptrTable[] = { "call", "LRxSubscriber;", "(Lrx/Subscriber<-TT;>;)V", "LRxObservable;", "(Lrx/Observable<TT;>;)V", "Lrx/Observable<TT;>;", "LRxInternalOperatorsOperatorReplay;", "observeOnWithRxObservablesConnectableObservable:withRxScheduler:", "Ljava/lang/Object;Lrx/Observable$OnSubscribe<TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_$3 = { "", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8008, 2, 1, 6, -1, 7, 8, -1 };
  return &_RxInternalOperatorsOperatorReplay_$3;
}

@end

void RxInternalOperatorsOperatorReplay_$3_initWithRxObservable_(RxInternalOperatorsOperatorReplay_$3 *self, RxObservable *capture$0) {
  self->val$observable_ = capture$0;
  NSObject_init(self);
}

RxInternalOperatorsOperatorReplay_$3 *new_RxInternalOperatorsOperatorReplay_$3_initWithRxObservable_(RxObservable *capture$0) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_$3, initWithRxObservable_, capture$0)
}

RxInternalOperatorsOperatorReplay_$3 *create_RxInternalOperatorsOperatorReplay_$3_initWithRxObservable_(RxObservable *capture$0) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_$3, initWithRxObservable_, capture$0)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_$3)

@implementation RxInternalOperatorsOperatorReplay_$3_$1

- (void)onNextWithId:(id)t {
  [((RxSubscriber *) nil_chk(val$child_)) onNextWithId:t];
}

- (void)onErrorWithNSException:(NSException *)e {
  [((RxSubscriber *) nil_chk(val$child_)) onErrorWithNSException:e];
}

- (void)onCompleted {
  [((RxSubscriber *) nil_chk(val$child_)) onCompleted];
}

- (instancetype)initWithRxSubscriber:(RxSubscriber *)capture$0
                    withRxSubscriber:(RxSubscriber *)arg$0 {
  RxInternalOperatorsOperatorReplay_$3_$1_initWithRxSubscriber_withRxSubscriber_(self, capture$0, arg$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "onNextWithId:", "V", 0x1, 0, 1, -1, 2, -1, -1 },
    { "onErrorWithNSException:", "V", 0x1, 3, 4, -1, -1, -1, -1 },
    { "onCompleted", "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { "initWithRxSubscriber:withRxSubscriber:", NULL, 0x0, -1, 5, -1, 6, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$child_", "LRxSubscriber;", .constantValue.asLong = 0, 0x1012, -1, -1, 7, -1 },
  };
  static const void *ptrTable[] = { "onNext", "LNSObject;", "(TT;)V", "onError", "LNSException;", "LRxSubscriber;LRxSubscriber;", "(Lrx/Subscriber<-TT;>;Lrx/Subscriber<*>;)V", "Lrx/Subscriber<-TT;>;", "LRxInternalOperatorsOperatorReplay_$3;", "callWithId:", "Lrx/Subscriber<TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_$3_$1 = { "", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8008, 4, 1, 8, -1, 9, 10, -1 };
  return &_RxInternalOperatorsOperatorReplay_$3_$1;
}

@end

void RxInternalOperatorsOperatorReplay_$3_$1_initWithRxSubscriber_withRxSubscriber_(RxInternalOperatorsOperatorReplay_$3_$1 *self, RxSubscriber *capture$0, RxSubscriber *arg$0) {
  self->val$child_ = capture$0;
  RxSubscriber_initWithRxSubscriber_(self, arg$0);
}

RxInternalOperatorsOperatorReplay_$3_$1 *new_RxInternalOperatorsOperatorReplay_$3_$1_initWithRxSubscriber_withRxSubscriber_(RxSubscriber *capture$0, RxSubscriber *arg$0) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_$3_$1, initWithRxSubscriber_withRxSubscriber_, capture$0, arg$0)
}

RxInternalOperatorsOperatorReplay_$3_$1 *create_RxInternalOperatorsOperatorReplay_$3_$1_initWithRxSubscriber_withRxSubscriber_(RxSubscriber *capture$0, RxSubscriber *arg$0) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_$3_$1, initWithRxSubscriber_withRxSubscriber_, capture$0, arg$0)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_$3_$1)

@implementation RxInternalOperatorsOperatorReplay_$4

- (void)connectWithRxFunctionsAction1:(id<RxFunctionsAction1>)connection {
  [((RxObservablesConnectableObservable *) nil_chk(val$co_)) connectWithRxFunctionsAction1:connection];
}

- (instancetype)initWithRxObservablesConnectableObservable:(RxObservablesConnectableObservable *)capture$0
                              withRxObservable_OnSubscribe:(id<RxObservable_OnSubscribe>)arg$0 {
  RxInternalOperatorsOperatorReplay_$4_initWithRxObservablesConnectableObservable_withRxObservable_OnSubscribe_(self, capture$0, arg$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "connectWithRxFunctionsAction1:", "V", 0x1, 0, 1, -1, 2, -1, -1 },
    { "initWithRxObservablesConnectableObservable:withRxObservable_OnSubscribe:", NULL, 0x0, -1, 3, -1, 4, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$co_", "LRxObservablesConnectableObservable;", .constantValue.asLong = 0, 0x1012, -1, -1, 5, -1 },
  };
  static const void *ptrTable[] = { "connect", "LRxFunctionsAction1;", "(Lrx/functions/Action1<-Lrx/Subscription;>;)V", "LRxObservablesConnectableObservable;LRxObservable_OnSubscribe;", "(Lrx/observables/ConnectableObservable<TT;>;Lrx/Observable$OnSubscribe<TT;>;)V", "Lrx/observables/ConnectableObservable<TT;>;", "LRxInternalOperatorsOperatorReplay;", "observeOnWithRxObservablesConnectableObservable:withRxScheduler:" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_$4 = { "", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8008, 2, 1, 6, -1, 7, 5, -1 };
  return &_RxInternalOperatorsOperatorReplay_$4;
}

@end

void RxInternalOperatorsOperatorReplay_$4_initWithRxObservablesConnectableObservable_withRxObservable_OnSubscribe_(RxInternalOperatorsOperatorReplay_$4 *self, RxObservablesConnectableObservable *capture$0, id<RxObservable_OnSubscribe> arg$0) {
  self->val$co_ = capture$0;
  RxObservablesConnectableObservable_initWithRxObservable_OnSubscribe_(self, arg$0);
}

RxInternalOperatorsOperatorReplay_$4 *new_RxInternalOperatorsOperatorReplay_$4_initWithRxObservablesConnectableObservable_withRxObservable_OnSubscribe_(RxObservablesConnectableObservable *capture$0, id<RxObservable_OnSubscribe> arg$0) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_$4, initWithRxObservablesConnectableObservable_withRxObservable_OnSubscribe_, capture$0, arg$0)
}

RxInternalOperatorsOperatorReplay_$4 *create_RxInternalOperatorsOperatorReplay_$4_initWithRxObservablesConnectableObservable_withRxObservable_OnSubscribe_(RxObservablesConnectableObservable *capture$0, id<RxObservable_OnSubscribe> arg$0) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_$4, initWithRxObservablesConnectableObservable_withRxObservable_OnSubscribe_, capture$0, arg$0)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_$4)

@implementation RxInternalOperatorsOperatorReplay_$5

- (id<RxInternalOperatorsOperatorReplay_ReplayBuffer>)call {
  return new_RxInternalOperatorsOperatorReplay_SizeBoundReplayBuffer_initWithInt_(val$bufferSize_);
}

- (instancetype)initWithInt:(jint)capture$0 {
  RxInternalOperatorsOperatorReplay_$5_initWithInt_(self, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "call", "LRxInternalOperatorsOperatorReplay_ReplayBuffer;", 0x1, -1, -1, -1, 0, -1, -1 },
    { "initWithInt:", NULL, 0x0, -1, 1, -1, -1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$bufferSize_", "I", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "()Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;", "I", "LRxInternalOperatorsOperatorReplay;", "createWithRxObservable:withInt:", "Ljava/lang/Object;Lrx/functions/Func0<Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_$5 = { "", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8008, 2, 1, 2, -1, 3, 4, -1 };
  return &_RxInternalOperatorsOperatorReplay_$5;
}

@end

void RxInternalOperatorsOperatorReplay_$5_initWithInt_(RxInternalOperatorsOperatorReplay_$5 *self, jint capture$0) {
  self->val$bufferSize_ = capture$0;
  NSObject_init(self);
}

RxInternalOperatorsOperatorReplay_$5 *new_RxInternalOperatorsOperatorReplay_$5_initWithInt_(jint capture$0) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_$5, initWithInt_, capture$0)
}

RxInternalOperatorsOperatorReplay_$5 *create_RxInternalOperatorsOperatorReplay_$5_initWithInt_(jint capture$0) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_$5, initWithInt_, capture$0)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_$5)

@implementation RxInternalOperatorsOperatorReplay_$6

- (id<RxInternalOperatorsOperatorReplay_ReplayBuffer>)call {
  return new_RxInternalOperatorsOperatorReplay_SizeAndTimeBoundReplayBuffer_initWithInt_withLong_withRxScheduler_(val$bufferSize_, val$maxAgeInMillis_, val$scheduler_);
}

- (instancetype)initWithInt:(jint)capture$0
                   withLong:(jlong)capture$1
            withRxScheduler:(RxScheduler *)capture$2 {
  RxInternalOperatorsOperatorReplay_$6_initWithInt_withLong_withRxScheduler_(self, capture$0, capture$1, capture$2);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "call", "LRxInternalOperatorsOperatorReplay_ReplayBuffer;", 0x1, -1, -1, -1, 0, -1, -1 },
    { "initWithInt:withLong:withRxScheduler:", NULL, 0x0, -1, 1, -1, -1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$bufferSize_", "I", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "val$maxAgeInMillis_", "J", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "val$scheduler_", "LRxScheduler;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "()Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;", "IJLRxScheduler;", "LRxInternalOperatorsOperatorReplay;", "createWithRxObservable:withLong:withJavaUtilConcurrentTimeUnit:withRxScheduler:withInt:", "Ljava/lang/Object;Lrx/functions/Func0<Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_$6 = { "", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8008, 2, 3, 2, -1, 3, 4, -1 };
  return &_RxInternalOperatorsOperatorReplay_$6;
}

@end

void RxInternalOperatorsOperatorReplay_$6_initWithInt_withLong_withRxScheduler_(RxInternalOperatorsOperatorReplay_$6 *self, jint capture$0, jlong capture$1, RxScheduler *capture$2) {
  self->val$bufferSize_ = capture$0;
  self->val$maxAgeInMillis_ = capture$1;
  self->val$scheduler_ = capture$2;
  NSObject_init(self);
}

RxInternalOperatorsOperatorReplay_$6 *new_RxInternalOperatorsOperatorReplay_$6_initWithInt_withLong_withRxScheduler_(jint capture$0, jlong capture$1, RxScheduler *capture$2) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_$6, initWithInt_withLong_withRxScheduler_, capture$0, capture$1, capture$2)
}

RxInternalOperatorsOperatorReplay_$6 *create_RxInternalOperatorsOperatorReplay_$6_initWithInt_withLong_withRxScheduler_(jint capture$0, jlong capture$1, RxScheduler *capture$2) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_$6, initWithInt_withLong_withRxScheduler_, capture$0, capture$1, capture$2)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_$6)

@implementation RxInternalOperatorsOperatorReplay_$7

- (void)callWithId:(RxSubscriber *)child {
  for (; ; ) {
    RxInternalOperatorsOperatorReplay_ReplaySubscriber *r = [((JavaUtilConcurrentAtomicAtomicReference *) nil_chk(val$curr_)) get];
    if (r == nil) {
      RxInternalOperatorsOperatorReplay_ReplaySubscriber *u = new_RxInternalOperatorsOperatorReplay_ReplaySubscriber_initWithJavaUtilConcurrentAtomicAtomicReference_withRxInternalOperatorsOperatorReplay_ReplayBuffer_(val$curr_, [((id<RxFunctionsFunc0>) nil_chk(val$bufferFactory_)) call]);
      [u init__];
      if (![val$curr_ compareAndSetWithId:r withId:u]) {
        continue;
      }
      r = u;
    }
    RxInternalOperatorsOperatorReplay_InnerProducer *inner = new_RxInternalOperatorsOperatorReplay_InnerProducer_initWithRxInternalOperatorsOperatorReplay_ReplaySubscriber_withRxSubscriber_(r, child);
    [r addWithRxInternalOperatorsOperatorReplay_InnerProducer:inner];
    [((RxSubscriber *) nil_chk(child)) addWithRxSubscription:inner];
    [((id<RxInternalOperatorsOperatorReplay_ReplayBuffer>) nil_chk(r->buffer_)) replayWithRxInternalOperatorsOperatorReplay_InnerProducer:inner];
    [child setProducerWithRxProducer:inner];
    break;
  }
}

- (instancetype)initWithJavaUtilConcurrentAtomicAtomicReference:(JavaUtilConcurrentAtomicAtomicReference *)capture$0
                                           withRxFunctionsFunc0:(id<RxFunctionsFunc0>)capture$1 {
  RxInternalOperatorsOperatorReplay_$7_initWithJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(self, capture$0, capture$1);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithId:", "V", 0x1, 0, 1, -1, 2, -1, -1 },
    { "initWithJavaUtilConcurrentAtomicAtomicReference:withRxFunctionsFunc0:", NULL, 0x0, -1, 3, -1, 4, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$curr_", "LJavaUtilConcurrentAtomicAtomicReference;", .constantValue.asLong = 0, 0x1012, -1, -1, 5, -1 },
    { "val$bufferFactory_", "LRxFunctionsFunc0;", .constantValue.asLong = 0, 0x1012, -1, -1, 6, -1 },
  };
  static const void *ptrTable[] = { "call", "LRxSubscriber;", "(Lrx/Subscriber<-TT;>;)V", "LJavaUtilConcurrentAtomicAtomicReference;LRxFunctionsFunc0;", "(Ljava/util/concurrent/atomic/AtomicReference<Lrx/internal/operators/OperatorReplay$ReplaySubscriber<TT;>;>;Lrx/functions/Func0<+Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;>;)V", "Ljava/util/concurrent/atomic/AtomicReference<Lrx/internal/operators/OperatorReplay$ReplaySubscriber<TT;>;>;", "Lrx/functions/Func0<+Lrx/internal/operators/OperatorReplay$ReplayBuffer<TT;>;>;", "LRxInternalOperatorsOperatorReplay;", "createWithRxObservable:withRxFunctionsFunc0:", "Ljava/lang/Object;Lrx/Observable$OnSubscribe<TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorReplay_$7 = { "", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8008, 2, 2, 7, -1, 8, 9, -1 };
  return &_RxInternalOperatorsOperatorReplay_$7;
}

@end

void RxInternalOperatorsOperatorReplay_$7_initWithJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(RxInternalOperatorsOperatorReplay_$7 *self, JavaUtilConcurrentAtomicAtomicReference *capture$0, id<RxFunctionsFunc0> capture$1) {
  self->val$curr_ = capture$0;
  self->val$bufferFactory_ = capture$1;
  NSObject_init(self);
}

RxInternalOperatorsOperatorReplay_$7 *new_RxInternalOperatorsOperatorReplay_$7_initWithJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(JavaUtilConcurrentAtomicAtomicReference *capture$0, id<RxFunctionsFunc0> capture$1) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorReplay_$7, initWithJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_, capture$0, capture$1)
}

RxInternalOperatorsOperatorReplay_$7 *create_RxInternalOperatorsOperatorReplay_$7_initWithJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_(JavaUtilConcurrentAtomicAtomicReference *capture$0, id<RxFunctionsFunc0> capture$1) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorReplay_$7, initWithJavaUtilConcurrentAtomicAtomicReference_withRxFunctionsFunc0_, capture$0, capture$1)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorReplay_$7)
