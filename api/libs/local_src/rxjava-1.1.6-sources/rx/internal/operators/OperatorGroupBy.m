//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: build/libs_raw/rxjava-1.1.6-sources/rx/internal/operators/OperatorGroupBy.java
//

#include "J2ObjC_source.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/Long.h"
#include "java/lang/NullPointerException.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Queue.h"
#include "java/util/concurrent/ConcurrentHashMap.h"
#include "java/util/concurrent/ConcurrentLinkedQueue.h"
#include "java/util/concurrent/atomic/AtomicBoolean.h"
#include "java/util/concurrent/atomic/AtomicInteger.h"
#include "java/util/concurrent/atomic/AtomicLong.h"
#include "java/util/concurrent/atomic/AtomicReference.h"
#include "rx/Producer.h"
#include "rx/Subscriber.h"
#include "rx/Subscription.h"
#include "rx/functions/Action0.h"
#include "rx/functions/Func1.h"
#include "rx/internal/operators/BackpressureUtils.h"
#include "rx/internal/operators/NotificationLite.h"
#include "rx/internal/operators/OperatorGroupBy.h"
#include "rx/internal/producers/ProducerArbiter.h"
#include "rx/internal/util/RxRingBuffer.h"
#include "rx/internal/util/UtilityFunctions.h"
#include "rx/observables/GroupedObservable.h"
#include "rx/plugins/RxJavaErrorHandler.h"
#include "rx/plugins/RxJavaPlugins.h"
#include "rx/subscriptions/Subscriptions.h"

/*!
 */
inline jlong RxInternalOperatorsOperatorGroupBy_State_get_serialVersionUID();
#define RxInternalOperatorsOperatorGroupBy_State_serialVersionUID -3852313036005250360LL
J2OBJC_STATIC_FIELD_CONSTANT(RxInternalOperatorsOperatorGroupBy_State, serialVersionUID, jlong)

@interface RxInternalOperatorsOperatorGroupBy_$1 : NSObject < RxFunctionsAction0 > {
 @public
  RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *val$parent_;
}

- (void)call;

- (instancetype)initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber:(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorGroupBy_$1)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorGroupBy_$1, val$parent_, RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *)

__attribute__((unused)) static void RxInternalOperatorsOperatorGroupBy_$1_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(RxInternalOperatorsOperatorGroupBy_$1 *self, RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *capture$0);

__attribute__((unused)) static RxInternalOperatorsOperatorGroupBy_$1 *new_RxInternalOperatorsOperatorGroupBy_$1_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *capture$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorGroupBy_$1 *create_RxInternalOperatorsOperatorGroupBy_$1_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *capture$0);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorGroupBy_$1)

@implementation RxInternalOperatorsOperatorGroupBy

- (instancetype)initWithRxFunctionsFunc1:(id<RxFunctionsFunc1>)keySelector {
  RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_(self, keySelector);
  return self;
}

- (instancetype)initWithRxFunctionsFunc1:(id<RxFunctionsFunc1>)keySelector
                    withRxFunctionsFunc1:(id<RxFunctionsFunc1>)valueSelector {
  RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_withRxFunctionsFunc1_(self, keySelector, valueSelector);
  return self;
}

- (instancetype)initWithRxFunctionsFunc1:(id<RxFunctionsFunc1>)keySelector
                    withRxFunctionsFunc1:(id<RxFunctionsFunc1>)valueSelector
                                 withInt:(jint)bufferSize
                             withBoolean:(jboolean)delayError {
  RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(self, keySelector, valueSelector, bufferSize, delayError);
  return self;
}

- (RxSubscriber *)callWithId:(RxSubscriber *)t {
  RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *parent = new_RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_initWithRxSubscriber_withRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(t, keySelector_, valueSelector_, bufferSize_, delayError_);
  [((RxSubscriber *) nil_chk(t)) addWithRxSubscription:RxSubscriptionsSubscriptions_createWithRxFunctionsAction0_(new_RxInternalOperatorsOperatorGroupBy_$1_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(parent))];
  [t setProducerWithRxProducer:parent->producer_GroupBySubscriber_];
  return parent;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithRxFunctionsFunc1:", NULL, 0x1, -1, 0, -1, 1, -1, -1 },
    { "initWithRxFunctionsFunc1:withRxFunctionsFunc1:", NULL, 0x1, -1, 2, -1, 3, -1, -1 },
    { "initWithRxFunctionsFunc1:withRxFunctionsFunc1:withInt:withBoolean:", NULL, 0x1, -1, 4, -1, 5, -1, -1 },
    { "callWithId:", "LRxSubscriber;", 0x1, 6, 7, -1, 8, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "keySelector_", "LRxFunctionsFunc1;", .constantValue.asLong = 0, 0x10, -1, -1, 9, -1 },
    { "valueSelector_", "LRxFunctionsFunc1;", .constantValue.asLong = 0, 0x10, -1, -1, 10, -1 },
    { "bufferSize_", "I", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "delayError_", "Z", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LRxFunctionsFunc1;", "(Lrx/functions/Func1<-TT;+TK;>;)V", "LRxFunctionsFunc1;LRxFunctionsFunc1;", "(Lrx/functions/Func1<-TT;+TK;>;Lrx/functions/Func1<-TT;+TV;>;)V", "LRxFunctionsFunc1;LRxFunctionsFunc1;IZ", "(Lrx/functions/Func1<-TT;+TK;>;Lrx/functions/Func1<-TT;+TV;>;IZ)V", "call", "LRxSubscriber;", "(Lrx/Subscriber<-Lrx/observables/GroupedObservable<TK;TV;>;>;)Lrx/Subscriber<-TT;>;", "Lrx/functions/Func1<-TT;+TK;>;", "Lrx/functions/Func1<-TT;+TV;>;", "LRxInternalOperatorsOperatorGroupBy_GroupByProducer;LRxInternalOperatorsOperatorGroupBy_GroupBySubscriber;LRxInternalOperatorsOperatorGroupBy_GroupedUnicast;LRxInternalOperatorsOperatorGroupBy_State;", "<T:Ljava/lang/Object;K:Ljava/lang/Object;V:Ljava/lang/Object;>Ljava/lang/Object;Lrx/Observable$Operator<Lrx/observables/GroupedObservable<TK;TV;>;TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorGroupBy = { "OperatorGroupBy", "rx.internal.operators", ptrTable, methods, fields, 7, 0x11, 4, 4, -1, 11, -1, 12, -1 };
  return &_RxInternalOperatorsOperatorGroupBy;
}

@end

void RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_(RxInternalOperatorsOperatorGroupBy *self, id<RxFunctionsFunc1> keySelector) {
  RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(self, keySelector, RxInternalUtilUtilityFunctions_identity(), JreLoadStatic(RxInternalUtilRxRingBuffer, SIZE), false);
}

RxInternalOperatorsOperatorGroupBy *new_RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_(id<RxFunctionsFunc1> keySelector) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorGroupBy, initWithRxFunctionsFunc1_, keySelector)
}

RxInternalOperatorsOperatorGroupBy *create_RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_(id<RxFunctionsFunc1> keySelector) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorGroupBy, initWithRxFunctionsFunc1_, keySelector)
}

void RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_withRxFunctionsFunc1_(RxInternalOperatorsOperatorGroupBy *self, id<RxFunctionsFunc1> keySelector, id<RxFunctionsFunc1> valueSelector) {
  RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(self, keySelector, valueSelector, JreLoadStatic(RxInternalUtilRxRingBuffer, SIZE), false);
}

RxInternalOperatorsOperatorGroupBy *new_RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_withRxFunctionsFunc1_(id<RxFunctionsFunc1> keySelector, id<RxFunctionsFunc1> valueSelector) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorGroupBy, initWithRxFunctionsFunc1_withRxFunctionsFunc1_, keySelector, valueSelector)
}

RxInternalOperatorsOperatorGroupBy *create_RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_withRxFunctionsFunc1_(id<RxFunctionsFunc1> keySelector, id<RxFunctionsFunc1> valueSelector) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorGroupBy, initWithRxFunctionsFunc1_withRxFunctionsFunc1_, keySelector, valueSelector)
}

void RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(RxInternalOperatorsOperatorGroupBy *self, id<RxFunctionsFunc1> keySelector, id<RxFunctionsFunc1> valueSelector, jint bufferSize, jboolean delayError) {
  NSObject_init(self);
  self->keySelector_ = keySelector;
  self->valueSelector_ = valueSelector;
  self->bufferSize_ = bufferSize;
  self->delayError_ = delayError;
}

RxInternalOperatorsOperatorGroupBy *new_RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(id<RxFunctionsFunc1> keySelector, id<RxFunctionsFunc1> valueSelector, jint bufferSize, jboolean delayError) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorGroupBy, initWithRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_, keySelector, valueSelector, bufferSize, delayError)
}

RxInternalOperatorsOperatorGroupBy *create_RxInternalOperatorsOperatorGroupBy_initWithRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(id<RxFunctionsFunc1> keySelector, id<RxFunctionsFunc1> valueSelector, jint bufferSize, jboolean delayError) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorGroupBy, initWithRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_, keySelector, valueSelector, bufferSize, delayError)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorGroupBy)

@implementation RxInternalOperatorsOperatorGroupBy_GroupByProducer

- (instancetype)initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber:(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *)parent {
  RxInternalOperatorsOperatorGroupBy_GroupByProducer_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(self, parent);
  return self;
}

- (void)requestWithLong:(jlong)n {
  [((RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *) nil_chk(parent_)) requestMoreWithLong:n];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber:", NULL, 0x1, -1, 0, -1, 1, -1, -1 },
    { "requestWithLong:", "V", 0x1, 2, 3, -1, -1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "parent_", "LRxInternalOperatorsOperatorGroupBy_GroupBySubscriber;", .constantValue.asLong = 0, 0x10, -1, -1, 4, -1 },
  };
  static const void *ptrTable[] = { "LRxInternalOperatorsOperatorGroupBy_GroupBySubscriber;", "(Lrx/internal/operators/OperatorGroupBy$GroupBySubscriber<***>;)V", "request", "J", "Lrx/internal/operators/OperatorGroupBy$GroupBySubscriber<***>;", "LRxInternalOperatorsOperatorGroupBy;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorGroupBy_GroupByProducer = { "GroupByProducer", "rx.internal.operators", ptrTable, methods, fields, 7, 0x19, 2, 1, 5, -1, -1, -1, -1 };
  return &_RxInternalOperatorsOperatorGroupBy_GroupByProducer;
}

@end

void RxInternalOperatorsOperatorGroupBy_GroupByProducer_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(RxInternalOperatorsOperatorGroupBy_GroupByProducer *self, RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *parent) {
  NSObject_init(self);
  self->parent_ = parent;
}

RxInternalOperatorsOperatorGroupBy_GroupByProducer *new_RxInternalOperatorsOperatorGroupBy_GroupByProducer_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *parent) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorGroupBy_GroupByProducer, initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_, parent)
}

RxInternalOperatorsOperatorGroupBy_GroupByProducer *create_RxInternalOperatorsOperatorGroupBy_GroupByProducer_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *parent) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorGroupBy_GroupByProducer, initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_, parent)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorGroupBy_GroupByProducer)

J2OBJC_INITIALIZED_DEFN(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber)

id RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_NULL_KEY;

@implementation RxInternalOperatorsOperatorGroupBy_GroupBySubscriber

+ (id)NULL_KEY {
  return RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_NULL_KEY;
}

- (instancetype)initWithRxSubscriber:(RxSubscriber *)actual
                withRxFunctionsFunc1:(id<RxFunctionsFunc1>)keySelector
                withRxFunctionsFunc1:(id<RxFunctionsFunc1>)valueSelector
                             withInt:(jint)bufferSize
                         withBoolean:(jboolean)delayError {
  RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_initWithRxSubscriber_withRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(self, actual, keySelector, valueSelector, bufferSize, delayError);
  return self;
}

- (void)setProducerWithRxProducer:(id<RxProducer>)s {
  [((RxInternalProducersProducerArbiter *) nil_chk(self->s_)) setProducerWithRxProducer:s];
}

- (void)onNextWithId:(id)t {
  if (JreLoadVolatileBoolean(&done_)) {
    return;
  }
  id<JavaUtilQueue> q = self->queue_;
  RxSubscriber *a = self->actual_;
  id key;
  @try {
    key = [((id<RxFunctionsFunc1>) nil_chk(keySelector_)) callWithId:t];
  }
  @catch (NSException *ex) {
    [self unsubscribe];
    [self errorAllWithRxSubscriber:a withJavaUtilQueue:q withNSException:ex];
    return;
  }
  jboolean notNew = true;
  id mapKey = key != nil ? key : RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_NULL_KEY;
  RxInternalOperatorsOperatorGroupBy_GroupedUnicast *group = [((id<JavaUtilMap>) nil_chk(groups_)) getWithId:mapKey];
  if (group == nil) {
    if (![((JavaUtilConcurrentAtomicAtomicBoolean *) nil_chk(cancelled_)) get]) {
      group = RxInternalOperatorsOperatorGroupBy_GroupedUnicast_createWithWithId_withInt_withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_withBoolean_(key, bufferSize_, self, delayError_);
      (void) [groups_ putWithId:mapKey withId:group];
      [((JavaUtilConcurrentAtomicAtomicInteger *) nil_chk(groupCount_)) getAndIncrement];
      notNew = false;
      [((id<JavaUtilQueue>) nil_chk(q)) offerWithId:group];
      [self drain];
    }
    else {
      return;
    }
  }
  id v;
  @try {
    v = [((id<RxFunctionsFunc1>) nil_chk(valueSelector_)) callWithId:t];
  }
  @catch (NSException *ex) {
    [self unsubscribe];
    [self errorAllWithRxSubscriber:a withJavaUtilQueue:q withNSException:ex];
    return;
  }
  [((RxInternalOperatorsOperatorGroupBy_GroupedUnicast *) nil_chk(group)) onNextWithId:v];
  if (notNew) {
    [((RxInternalProducersProducerArbiter *) nil_chk(s_)) requestWithLong:1];
  }
}

- (void)onErrorWithNSException:(NSException *)t {
  if (JreLoadVolatileBoolean(&done_)) {
    [((RxPluginsRxJavaErrorHandler *) nil_chk([((RxPluginsRxJavaPlugins *) nil_chk(RxPluginsRxJavaPlugins_getInstance())) getErrorHandler])) handleErrorWithNSException:t];
    return;
  }
  error_ = t;
  JreAssignVolatileBoolean(&done_, true);
  [((JavaUtilConcurrentAtomicAtomicInteger *) nil_chk(groupCount_)) decrementAndGet];
  [self drain];
}

- (void)onCompleted {
  if (JreLoadVolatileBoolean(&done_)) {
    return;
  }
  for (RxInternalOperatorsOperatorGroupBy_GroupedUnicast * __strong e in nil_chk([((id<JavaUtilMap>) nil_chk(groups_)) values])) {
    [((RxInternalOperatorsOperatorGroupBy_GroupedUnicast *) nil_chk(e)) onComplete];
  }
  [groups_ clear];
  JreAssignVolatileBoolean(&done_, true);
  [((JavaUtilConcurrentAtomicAtomicInteger *) nil_chk(groupCount_)) decrementAndGet];
  [self drain];
}

- (void)requestMoreWithLong:(jlong)n {
  if (n < 0) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$J", @"n >= 0 required but it was ", n));
  }
  RxInternalOperatorsBackpressureUtils_getAndAddRequestWithJavaUtilConcurrentAtomicAtomicLong_withLong_(requested_GroupBySubscriber_, n);
  [self drain];
}

- (void)cancel {
  if ([((JavaUtilConcurrentAtomicAtomicBoolean *) nil_chk(cancelled_)) compareAndSetWithBoolean:false withBoolean:true]) {
    if ([((JavaUtilConcurrentAtomicAtomicInteger *) nil_chk(groupCount_)) decrementAndGet] == 0) {
      [self unsubscribe];
    }
  }
}

- (void)cancelWithId:(id)key {
  id mapKey = key != nil ? key : RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_NULL_KEY;
  if ([((id<JavaUtilMap>) nil_chk(groups_)) removeWithId:mapKey] != nil) {
    if ([((JavaUtilConcurrentAtomicAtomicInteger *) nil_chk(groupCount_)) decrementAndGet] == 0) {
      [self unsubscribe];
    }
  }
}

- (void)drain {
  if ([((JavaUtilConcurrentAtomicAtomicInteger *) nil_chk(wip_)) getAndIncrement] != 0) {
    return;
  }
  jint missed = 1;
  id<JavaUtilQueue> q = self->queue_;
  RxSubscriber *a = self->actual_;
  for (; ; ) {
    if ([self checkTerminatedWithBoolean:JreLoadVolatileBoolean(&done_) withBoolean:[((id<JavaUtilQueue>) nil_chk(q)) isEmpty] withRxSubscriber:a withJavaUtilQueue:q]) {
      return;
    }
    jlong r = [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(requested_GroupBySubscriber_)) get];
    jboolean unbounded = r == JavaLangLong_MAX_VALUE;
    jlong e = 0LL;
    while (r != 0) {
      jboolean d = JreLoadVolatileBoolean(&done_);
      RxObservablesGroupedObservable *t = [q poll];
      jboolean empty = t == nil;
      if ([self checkTerminatedWithBoolean:d withBoolean:empty withRxSubscriber:a withJavaUtilQueue:q]) {
        return;
      }
      if (empty) {
        break;
      }
      [((RxSubscriber *) nil_chk(a)) onNextWithId:t];
      r--;
      e--;
    }
    if (e != 0LL) {
      if (!unbounded) {
        [requested_GroupBySubscriber_ addAndGetWithLong:e];
      }
      [((RxInternalProducersProducerArbiter *) nil_chk(s_)) requestWithLong:-e];
    }
    missed = [wip_ addAndGetWithInt:-missed];
    if (missed == 0) {
      break;
    }
  }
}

- (void)errorAllWithRxSubscriber:(RxSubscriber *)a
               withJavaUtilQueue:(id<JavaUtilQueue>)q
                 withNSException:(NSException *)ex {
  [((id<JavaUtilQueue>) nil_chk(q)) clear];
  id<JavaUtilList> list = new_JavaUtilArrayList_initWithJavaUtilCollection_([((id<JavaUtilMap>) nil_chk(groups_)) values]);
  [groups_ clear];
  for (RxInternalOperatorsOperatorGroupBy_GroupedUnicast * __strong e in list) {
    [((RxInternalOperatorsOperatorGroupBy_GroupedUnicast *) nil_chk(e)) onErrorWithNSException:ex];
  }
  [((RxSubscriber *) nil_chk(a)) onErrorWithNSException:ex];
}

- (jboolean)checkTerminatedWithBoolean:(jboolean)d
                           withBoolean:(jboolean)empty
                      withRxSubscriber:(RxSubscriber *)a
                     withJavaUtilQueue:(id<JavaUtilQueue>)q {
  if (d) {
    NSException *err = error_;
    if (err != nil) {
      [self errorAllWithRxSubscriber:a withJavaUtilQueue:q withNSException:err];
      return true;
    }
    else if (empty) {
      [((RxSubscriber *) nil_chk(actual_)) onCompleted];
      return true;
    }
  }
  return false;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithRxSubscriber:withRxFunctionsFunc1:withRxFunctionsFunc1:withInt:withBoolean:", NULL, 0x1, -1, 0, -1, 1, -1, -1 },
    { "setProducerWithRxProducer:", "V", 0x1, 2, 3, -1, -1, -1, -1 },
    { "onNextWithId:", "V", 0x1, 4, 5, -1, 6, -1, -1 },
    { "onErrorWithNSException:", "V", 0x1, 7, 8, -1, -1, -1, -1 },
    { "onCompleted", "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { "requestMoreWithLong:", "V", 0x1, 9, 10, -1, -1, -1, -1 },
    { "cancel", "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { "cancelWithId:", "V", 0x1, 11, 5, -1, 12, -1, -1 },
    { "drain", "V", 0x0, -1, -1, -1, -1, -1, -1 },
    { "errorAllWithRxSubscriber:withJavaUtilQueue:withNSException:", "V", 0x0, 13, 14, -1, 15, -1, -1 },
    { "checkTerminatedWithBoolean:withBoolean:withRxSubscriber:withJavaUtilQueue:", "Z", 0x0, 16, 17, -1, 18, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "actual_", "LRxSubscriber;", .constantValue.asLong = 0, 0x10, -1, -1, 19, -1 },
    { "keySelector_", "LRxFunctionsFunc1;", .constantValue.asLong = 0, 0x10, -1, -1, 20, -1 },
    { "valueSelector_", "LRxFunctionsFunc1;", .constantValue.asLong = 0, 0x10, -1, -1, 21, -1 },
    { "bufferSize_", "I", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "delayError_", "Z", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "groups_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x10, -1, -1, 22, -1 },
    { "queue_", "LJavaUtilQueue;", .constantValue.asLong = 0, 0x10, -1, -1, 23, -1 },
    { "producer_GroupBySubscriber_", "LRxInternalOperatorsOperatorGroupBy_GroupByProducer;", .constantValue.asLong = 0, 0x10, 24, -1, -1, -1 },
    { "NULL_KEY", "LNSObject;", .constantValue.asLong = 0, 0x18, -1, 25, -1, -1 },
    { "s_", "LRxInternalProducersProducerArbiter;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "cancelled_", "LJavaUtilConcurrentAtomicAtomicBoolean;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "requested_GroupBySubscriber_", "LJavaUtilConcurrentAtomicAtomicLong;", .constantValue.asLong = 0, 0x10, 26, -1, -1, -1 },
    { "groupCount_", "LJavaUtilConcurrentAtomicAtomicInteger;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "error_", "LNSException;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "done_", "Z", .constantValue.asLong = 0, 0x40, -1, -1, -1, -1 },
    { "wip_", "LJavaUtilConcurrentAtomicAtomicInteger;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LRxSubscriber;LRxFunctionsFunc1;LRxFunctionsFunc1;IZ", "(Lrx/Subscriber<-Lrx/observables/GroupedObservable<TK;TV;>;>;Lrx/functions/Func1<-TT;+TK;>;Lrx/functions/Func1<-TT;+TV;>;IZ)V", "setProducer", "LRxProducer;", "onNext", "LNSObject;", "(TT;)V", "onError", "LNSException;", "requestMore", "J", "cancel", "(TK;)V", "errorAll", "LRxSubscriber;LJavaUtilQueue;LNSException;", "(Lrx/Subscriber<-Lrx/observables/GroupedObservable<TK;TV;>;>;Ljava/util/Queue<*>;Ljava/lang/Throwable;)V", "checkTerminated", "ZZLRxSubscriber;LJavaUtilQueue;", "(ZZLrx/Subscriber<-Lrx/observables/GroupedObservable<TK;TV;>;>;Ljava/util/Queue<*>;)Z", "Lrx/Subscriber<-Lrx/observables/GroupedObservable<TK;TV;>;>;", "Lrx/functions/Func1<-TT;+TK;>;", "Lrx/functions/Func1<-TT;+TV;>;", "Ljava/util/Map<Ljava/lang/Object;Lrx/internal/operators/OperatorGroupBy$GroupedUnicast<TK;TV;>;>;", "Ljava/util/Queue<Lrx/observables/GroupedObservable<TK;TV;>;>;", "producer", &RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_NULL_KEY, "requested", "LRxInternalOperatorsOperatorGroupBy;", "<T:Ljava/lang/Object;K:Ljava/lang/Object;V:Ljava/lang/Object;>Lrx/Subscriber<TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorGroupBy_GroupBySubscriber = { "GroupBySubscriber", "rx.internal.operators", ptrTable, methods, fields, 7, 0x19, 11, 16, 27, -1, -1, 28, -1 };
  return &_RxInternalOperatorsOperatorGroupBy_GroupBySubscriber;
}

+ (void)initialize {
  if (self == [RxInternalOperatorsOperatorGroupBy_GroupBySubscriber class]) {
    RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_NULL_KEY = new_NSObject_init();
    J2OBJC_SET_INITIALIZED(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber)
  }
}

@end

void RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_initWithRxSubscriber_withRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *self, RxSubscriber *actual, id<RxFunctionsFunc1> keySelector, id<RxFunctionsFunc1> valueSelector, jint bufferSize, jboolean delayError) {
  RxSubscriber_init(self);
  self->actual_ = actual;
  self->keySelector_ = keySelector;
  self->valueSelector_ = valueSelector;
  self->bufferSize_ = bufferSize;
  self->delayError_ = delayError;
  self->groups_ = new_JavaUtilConcurrentConcurrentHashMap_init();
  self->queue_ = new_JavaUtilConcurrentConcurrentLinkedQueue_init();
  self->s_ = new_RxInternalProducersProducerArbiter_init();
  [self->s_ requestWithLong:bufferSize];
  self->producer_GroupBySubscriber_ = new_RxInternalOperatorsOperatorGroupBy_GroupByProducer_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(self);
  self->cancelled_ = new_JavaUtilConcurrentAtomicAtomicBoolean_init();
  self->requested_GroupBySubscriber_ = new_JavaUtilConcurrentAtomicAtomicLong_init();
  self->groupCount_ = new_JavaUtilConcurrentAtomicAtomicInteger_initWithInt_(1);
  self->wip_ = new_JavaUtilConcurrentAtomicAtomicInteger_init();
}

RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *new_RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_initWithRxSubscriber_withRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(RxSubscriber *actual, id<RxFunctionsFunc1> keySelector, id<RxFunctionsFunc1> valueSelector, jint bufferSize, jboolean delayError) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber, initWithRxSubscriber_withRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_, actual, keySelector, valueSelector, bufferSize, delayError)
}

RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *create_RxInternalOperatorsOperatorGroupBy_GroupBySubscriber_initWithRxSubscriber_withRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_(RxSubscriber *actual, id<RxFunctionsFunc1> keySelector, id<RxFunctionsFunc1> valueSelector, jint bufferSize, jboolean delayError) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber, initWithRxSubscriber_withRxFunctionsFunc1_withRxFunctionsFunc1_withInt_withBoolean_, actual, keySelector, valueSelector, bufferSize, delayError)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber)

@implementation RxInternalOperatorsOperatorGroupBy_GroupedUnicast

+ (RxInternalOperatorsOperatorGroupBy_GroupedUnicast *)createWithWithId:(id)key
                                                                withInt:(jint)bufferSize
               withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber:(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *)parent
                                                            withBoolean:(jboolean)delayError {
  return RxInternalOperatorsOperatorGroupBy_GroupedUnicast_createWithWithId_withInt_withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_withBoolean_(key, bufferSize, parent, delayError);
}

- (instancetype)initWithId:(id)key
withRxInternalOperatorsOperatorGroupBy_State:(RxInternalOperatorsOperatorGroupBy_State *)state {
  RxInternalOperatorsOperatorGroupBy_GroupedUnicast_initWithId_withRxInternalOperatorsOperatorGroupBy_State_(self, key, state);
  return self;
}

- (void)onNextWithId:(id)t {
  [((RxInternalOperatorsOperatorGroupBy_State *) nil_chk(state_)) onNextWithId:t];
}

- (void)onErrorWithNSException:(NSException *)e {
  [((RxInternalOperatorsOperatorGroupBy_State *) nil_chk(state_)) onErrorWithNSException:e];
}

- (void)onComplete {
  [((RxInternalOperatorsOperatorGroupBy_State *) nil_chk(state_)) onComplete];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "createWithWithId:withInt:withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber:withBoolean:", "LRxInternalOperatorsOperatorGroupBy_GroupedUnicast;", 0x9, 0, 1, -1, 2, -1, -1 },
    { "initWithId:withRxInternalOperatorsOperatorGroupBy_State:", NULL, 0x4, -1, 3, -1, 4, -1, -1 },
    { "onNextWithId:", "V", 0x1, 5, 6, -1, 7, -1, -1 },
    { "onErrorWithNSException:", "V", 0x1, 8, 9, -1, -1, -1, -1 },
    { "onComplete", "V", 0x1, -1, -1, -1, -1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "state_", "LRxInternalOperatorsOperatorGroupBy_State;", .constantValue.asLong = 0, 0x10, -1, -1, 10, -1 },
  };
  static const void *ptrTable[] = { "createWith", "LNSObject;ILRxInternalOperatorsOperatorGroupBy_GroupBySubscriber;Z", "<T:Ljava/lang/Object;K:Ljava/lang/Object;>(TK;ILrx/internal/operators/OperatorGroupBy$GroupBySubscriber<*TK;TT;>;Z)Lrx/internal/operators/OperatorGroupBy$GroupedUnicast<TK;TT;>;", "LNSObject;LRxInternalOperatorsOperatorGroupBy_State;", "(TK;Lrx/internal/operators/OperatorGroupBy$State<TT;TK;>;)V", "onNext", "LNSObject;", "(TT;)V", "onError", "LNSException;", "Lrx/internal/operators/OperatorGroupBy$State<TT;TK;>;", "LRxInternalOperatorsOperatorGroupBy;", "<K:Ljava/lang/Object;T:Ljava/lang/Object;>Lrx/observables/GroupedObservable<TK;TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorGroupBy_GroupedUnicast = { "GroupedUnicast", "rx.internal.operators", ptrTable, methods, fields, 7, 0x18, 5, 1, 11, -1, -1, 12, -1 };
  return &_RxInternalOperatorsOperatorGroupBy_GroupedUnicast;
}

@end

RxInternalOperatorsOperatorGroupBy_GroupedUnicast *RxInternalOperatorsOperatorGroupBy_GroupedUnicast_createWithWithId_withInt_withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_withBoolean_(id key, jint bufferSize, RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *parent, jboolean delayError) {
  RxInternalOperatorsOperatorGroupBy_GroupedUnicast_initialize();
  RxInternalOperatorsOperatorGroupBy_State *state = new_RxInternalOperatorsOperatorGroupBy_State_initWithInt_withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_withId_withBoolean_(bufferSize, parent, key, delayError);
  return new_RxInternalOperatorsOperatorGroupBy_GroupedUnicast_initWithId_withRxInternalOperatorsOperatorGroupBy_State_(key, state);
}

void RxInternalOperatorsOperatorGroupBy_GroupedUnicast_initWithId_withRxInternalOperatorsOperatorGroupBy_State_(RxInternalOperatorsOperatorGroupBy_GroupedUnicast *self, id key, RxInternalOperatorsOperatorGroupBy_State *state) {
  RxObservablesGroupedObservable_initWithId_withRxObservable_OnSubscribe_(self, key, state);
  self->state_ = state;
}

RxInternalOperatorsOperatorGroupBy_GroupedUnicast *new_RxInternalOperatorsOperatorGroupBy_GroupedUnicast_initWithId_withRxInternalOperatorsOperatorGroupBy_State_(id key, RxInternalOperatorsOperatorGroupBy_State *state) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorGroupBy_GroupedUnicast, initWithId_withRxInternalOperatorsOperatorGroupBy_State_, key, state)
}

RxInternalOperatorsOperatorGroupBy_GroupedUnicast *create_RxInternalOperatorsOperatorGroupBy_GroupedUnicast_initWithId_withRxInternalOperatorsOperatorGroupBy_State_(id key, RxInternalOperatorsOperatorGroupBy_State *state) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorGroupBy_GroupedUnicast, initWithId_withRxInternalOperatorsOperatorGroupBy_State_, key, state)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorGroupBy_GroupedUnicast)

@implementation RxInternalOperatorsOperatorGroupBy_State

- (instancetype)initWithInt:(jint)bufferSize
withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber:(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *)parent
                     withId:(id)key
                withBoolean:(jboolean)delayError {
  RxInternalOperatorsOperatorGroupBy_State_initWithInt_withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_withId_withBoolean_(self, bufferSize, parent, key, delayError);
  return self;
}

- (void)requestWithLong:(jlong)n {
  if (n < 0) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$J", @"n >= required but it was ", n));
  }
  if (n != 0LL) {
    RxInternalOperatorsBackpressureUtils_getAndAddRequestWithJavaUtilConcurrentAtomicAtomicLong_withLong_(requested_, n);
    [self drain];
  }
}

- (jboolean)isUnsubscribed {
  return [((JavaUtilConcurrentAtomicAtomicBoolean *) nil_chk(cancelled_)) get];
}

- (void)unsubscribe {
  if ([((JavaUtilConcurrentAtomicAtomicBoolean *) nil_chk(cancelled_)) compareAndSetWithBoolean:false withBoolean:true]) {
    if ([self getAndIncrement] == 0) {
      [((RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *) nil_chk(parent_)) cancelWithId:key_];
    }
  }
}

- (void)callWithId:(RxSubscriber *)s {
  if ([((JavaUtilConcurrentAtomicAtomicBoolean *) nil_chk(once_)) compareAndSetWithBoolean:false withBoolean:true]) {
    [((RxSubscriber *) nil_chk(s)) addWithRxSubscription:self];
    [s setProducerWithRxProducer:self];
    [((JavaUtilConcurrentAtomicAtomicReference *) nil_chk(actual_)) lazySetWithId:s];
    [self drain];
  }
  else {
    [((RxSubscriber *) nil_chk(s)) onErrorWithNSException:new_JavaLangIllegalStateException_initWithNSString_(@"Only one Subscriber allowed!")];
  }
}

- (void)onNextWithId:(id)t {
  if (t == nil) {
    error_ = new_JavaLangNullPointerException_init();
    JreAssignVolatileBoolean(&done_, true);
  }
  else {
    [((id<JavaUtilQueue>) nil_chk(queue_)) offerWithId:[((RxInternalOperatorsNotificationLite *) nil_chk(RxInternalOperatorsNotificationLite_instance())) nextWithId:t]];
  }
  [self drain];
}

- (void)onErrorWithNSException:(NSException *)e {
  error_ = e;
  JreAssignVolatileBoolean(&done_, true);
  [self drain];
}

- (void)onComplete {
  JreAssignVolatileBoolean(&done_, true);
  [self drain];
}

- (void)drain {
  if ([self getAndIncrement] != 0) {
    return;
  }
  jint missed = 1;
  id<JavaUtilQueue> q = queue_;
  jboolean delayError = self->delayError_;
  RxSubscriber *a = [((JavaUtilConcurrentAtomicAtomicReference *) nil_chk(actual_)) get];
  RxInternalOperatorsNotificationLite *nl = RxInternalOperatorsNotificationLite_instance();
  for (; ; ) {
    if (a != nil) {
      if ([self checkTerminatedWithBoolean:JreLoadVolatileBoolean(&done_) withBoolean:[((id<JavaUtilQueue>) nil_chk(q)) isEmpty] withRxSubscriber:a withBoolean:delayError]) {
        return;
      }
      jlong r = [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(requested_)) get];
      jboolean unbounded = r == JavaLangLong_MAX_VALUE;
      jlong e = 0;
      while (r != 0LL) {
        jboolean d = JreLoadVolatileBoolean(&done_);
        id v = [q poll];
        jboolean empty = v == nil;
        if ([self checkTerminatedWithBoolean:d withBoolean:empty withRxSubscriber:a withBoolean:delayError]) {
          return;
        }
        if (empty) {
          break;
        }
        [a onNextWithId:[((RxInternalOperatorsNotificationLite *) nil_chk(nl)) getValueWithId:v]];
        r--;
        e--;
      }
      if (e != 0LL) {
        if (!unbounded) {
          [requested_ addAndGetWithLong:e];
        }
        [((RxInternalProducersProducerArbiter *) nil_chk(((RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *) nil_chk(parent_))->s_)) requestWithLong:-e];
      }
    }
    missed = [self addAndGetWithInt:-missed];
    if (missed == 0) {
      break;
    }
    if (a == nil) {
      a = [actual_ get];
    }
  }
}

- (jboolean)checkTerminatedWithBoolean:(jboolean)d
                           withBoolean:(jboolean)empty
                      withRxSubscriber:(RxSubscriber *)a
                           withBoolean:(jboolean)delayError {
  if ([((JavaUtilConcurrentAtomicAtomicBoolean *) nil_chk(cancelled_)) get]) {
    [((id<JavaUtilQueue>) nil_chk(queue_)) clear];
    [((RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *) nil_chk(parent_)) cancelWithId:key_];
    return true;
  }
  if (d) {
    if (delayError) {
      if (empty) {
        NSException *e = error_;
        if (e != nil) {
          [((RxSubscriber *) nil_chk(a)) onErrorWithNSException:e];
        }
        else {
          [((RxSubscriber *) nil_chk(a)) onCompleted];
        }
        return true;
      }
    }
    else {
      NSException *e = error_;
      if (e != nil) {
        [((id<JavaUtilQueue>) nil_chk(queue_)) clear];
        [((RxSubscriber *) nil_chk(a)) onErrorWithNSException:e];
        return true;
      }
      else if (empty) {
        [((RxSubscriber *) nil_chk(a)) onCompleted];
        return true;
      }
    }
  }
  return false;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber:withId:withBoolean:", NULL, 0x1, -1, 0, -1, 1, -1, -1 },
    { "requestWithLong:", "V", 0x1, 2, 3, -1, -1, -1, -1 },
    { "isUnsubscribed", "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { "unsubscribe", "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { "callWithId:", "V", 0x1, 4, 5, -1, 6, -1, -1 },
    { "onNextWithId:", "V", 0x1, 7, 8, -1, 9, -1, -1 },
    { "onErrorWithNSException:", "V", 0x1, 10, 11, -1, -1, -1, -1 },
    { "onComplete", "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { "drain", "V", 0x0, -1, -1, -1, -1, -1, -1 },
    { "checkTerminatedWithBoolean:withBoolean:withRxSubscriber:withBoolean:", "Z", 0x0, 12, 13, -1, 14, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID", "J", .constantValue.asLong = RxInternalOperatorsOperatorGroupBy_State_serialVersionUID, 0x1a, -1, -1, -1, -1 },
    { "key_", "LNSObject;", .constantValue.asLong = 0, 0x10, -1, -1, 15, -1 },
    { "queue_", "LJavaUtilQueue;", .constantValue.asLong = 0, 0x10, -1, -1, 16, -1 },
    { "parent_", "LRxInternalOperatorsOperatorGroupBy_GroupBySubscriber;", .constantValue.asLong = 0, 0x10, -1, -1, 17, -1 },
    { "delayError_", "Z", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "requested_", "LJavaUtilConcurrentAtomicAtomicLong;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "done_", "Z", .constantValue.asLong = 0, 0x40, -1, -1, -1, -1 },
    { "error_", "LNSException;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "cancelled_", "LJavaUtilConcurrentAtomicAtomicBoolean;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "actual_", "LJavaUtilConcurrentAtomicAtomicReference;", .constantValue.asLong = 0, 0x10, -1, -1, 18, -1 },
    { "once_", "LJavaUtilConcurrentAtomicAtomicBoolean;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "ILRxInternalOperatorsOperatorGroupBy_GroupBySubscriber;LNSObject;Z", "(ILrx/internal/operators/OperatorGroupBy$GroupBySubscriber<*TK;TT;>;TK;Z)V", "request", "J", "call", "LRxSubscriber;", "(Lrx/Subscriber<-TT;>;)V", "onNext", "LNSObject;", "(TT;)V", "onError", "LNSException;", "checkTerminated", "ZZLRxSubscriber;Z", "(ZZLrx/Subscriber<-TT;>;Z)Z", "TK;", "Ljava/util/Queue<Ljava/lang/Object;>;", "Lrx/internal/operators/OperatorGroupBy$GroupBySubscriber<*TK;TT;>;", "Ljava/util/concurrent/atomic/AtomicReference<Lrx/Subscriber<-TT;>;>;", "LRxInternalOperatorsOperatorGroupBy;", "<T:Ljava/lang/Object;K:Ljava/lang/Object;>Ljava/util/concurrent/atomic/AtomicInteger;Lrx/Producer;Lrx/Subscription;Lrx/Observable$OnSubscribe<TT;>;" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorGroupBy_State = { "State", "rx.internal.operators", ptrTable, methods, fields, 7, 0x18, 10, 11, 19, -1, -1, 20, -1 };
  return &_RxInternalOperatorsOperatorGroupBy_State;
}

@end

void RxInternalOperatorsOperatorGroupBy_State_initWithInt_withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_withId_withBoolean_(RxInternalOperatorsOperatorGroupBy_State *self, jint bufferSize, RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *parent, id key, jboolean delayError) {
  JavaUtilConcurrentAtomicAtomicInteger_init(self);
  self->queue_ = new_JavaUtilConcurrentConcurrentLinkedQueue_init();
  self->parent_ = parent;
  self->key_ = key;
  self->delayError_ = delayError;
  self->cancelled_ = new_JavaUtilConcurrentAtomicAtomicBoolean_init();
  self->actual_ = new_JavaUtilConcurrentAtomicAtomicReference_init();
  self->once_ = new_JavaUtilConcurrentAtomicAtomicBoolean_init();
  self->requested_ = new_JavaUtilConcurrentAtomicAtomicLong_init();
}

RxInternalOperatorsOperatorGroupBy_State *new_RxInternalOperatorsOperatorGroupBy_State_initWithInt_withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_withId_withBoolean_(jint bufferSize, RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *parent, id key, jboolean delayError) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorGroupBy_State, initWithInt_withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_withId_withBoolean_, bufferSize, parent, key, delayError)
}

RxInternalOperatorsOperatorGroupBy_State *create_RxInternalOperatorsOperatorGroupBy_State_initWithInt_withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_withId_withBoolean_(jint bufferSize, RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *parent, id key, jboolean delayError) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorGroupBy_State, initWithInt_withRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_withId_withBoolean_, bufferSize, parent, key, delayError)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorGroupBy_State)

@implementation RxInternalOperatorsOperatorGroupBy_$1

- (void)call {
  [((RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *) nil_chk(val$parent_)) cancel];
}

- (instancetype)initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber:(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *)capture$0 {
  RxInternalOperatorsOperatorGroupBy_$1_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(self, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "call", "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { "initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber:", NULL, 0x0, -1, 0, -1, 1, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$parent_", "LRxInternalOperatorsOperatorGroupBy_GroupBySubscriber;", .constantValue.asLong = 0, 0x1012, -1, -1, 2, -1 },
  };
  static const void *ptrTable[] = { "LRxInternalOperatorsOperatorGroupBy_GroupBySubscriber;", "(Lrx/internal/operators/OperatorGroupBy$GroupBySubscriber<TT;TK;TV;>;)V", "Lrx/internal/operators/OperatorGroupBy$GroupBySubscriber<TT;TK;TV;>;", "LRxInternalOperatorsOperatorGroupBy;", "callWithId:" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorGroupBy_$1 = { "", "rx.internal.operators", ptrTable, methods, fields, 7, 0x8008, 2, 1, 3, -1, 4, -1, -1 };
  return &_RxInternalOperatorsOperatorGroupBy_$1;
}

@end

void RxInternalOperatorsOperatorGroupBy_$1_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(RxInternalOperatorsOperatorGroupBy_$1 *self, RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *capture$0) {
  self->val$parent_ = capture$0;
  NSObject_init(self);
}

RxInternalOperatorsOperatorGroupBy_$1 *new_RxInternalOperatorsOperatorGroupBy_$1_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *capture$0) {
  J2OBJC_NEW_IMPL(RxInternalOperatorsOperatorGroupBy_$1, initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_, capture$0)
}

RxInternalOperatorsOperatorGroupBy_$1 *create_RxInternalOperatorsOperatorGroupBy_$1_initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_(RxInternalOperatorsOperatorGroupBy_GroupBySubscriber *capture$0) {
  J2OBJC_CREATE_IMPL(RxInternalOperatorsOperatorGroupBy_$1, initWithRxInternalOperatorsOperatorGroupBy_GroupBySubscriber_, capture$0)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorGroupBy_$1)
