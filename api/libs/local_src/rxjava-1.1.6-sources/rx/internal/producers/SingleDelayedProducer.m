//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: build/libs_raw/rxjava-1.1.6-sources/rx/internal/producers/SingleDelayedProducer.java
//

#include "J2ObjC_source.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/util/concurrent/atomic/AtomicInteger.h"
#include "rx/Subscriber.h"
#include "rx/exceptions/Exceptions.h"
#include "rx/internal/producers/SingleDelayedProducer.h"

@interface RxInternalProducersSingleDelayedProducer ()

/*!
 @brief Emits the given value to the child subscriber and completes it
 and checks for unsubscriptions eagerly.
 @param c
 @param v
 */
+ (void)emitWithRxSubscriber:(RxSubscriber *)c
                      withId:(id)v;

@end

/*!
 */
inline jlong RxInternalProducersSingleDelayedProducer_get_serialVersionUID();
#define RxInternalProducersSingleDelayedProducer_serialVersionUID -2873467947112093874LL
J2OBJC_STATIC_FIELD_CONSTANT(RxInternalProducersSingleDelayedProducer, serialVersionUID, jlong)

__attribute__((unused)) static void RxInternalProducersSingleDelayedProducer_emitWithRxSubscriber_withId_(RxSubscriber *c, id v);

@implementation RxInternalProducersSingleDelayedProducer

+ (jint)NO_REQUEST_NO_VALUE {
  return RxInternalProducersSingleDelayedProducer_NO_REQUEST_NO_VALUE;
}

+ (jint)NO_REQUEST_HAS_VALUE {
  return RxInternalProducersSingleDelayedProducer_NO_REQUEST_HAS_VALUE;
}

+ (jint)HAS_REQUEST_NO_VALUE {
  return RxInternalProducersSingleDelayedProducer_HAS_REQUEST_NO_VALUE;
}

+ (jint)HAS_REQUEST_HAS_VALUE {
  return RxInternalProducersSingleDelayedProducer_HAS_REQUEST_HAS_VALUE;
}

- (instancetype)initWithRxSubscriber:(RxSubscriber *)child {
  RxInternalProducersSingleDelayedProducer_initWithRxSubscriber_(self, child);
  return self;
}

- (void)requestWithLong:(jlong)n {
  if (n < 0) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"n >= 0 required");
  }
  if (n == 0) {
    return;
  }
  for (; ; ) {
    jint s = [self get];
    if (s == RxInternalProducersSingleDelayedProducer_NO_REQUEST_NO_VALUE) {
      if (![self compareAndSetWithInt:RxInternalProducersSingleDelayedProducer_NO_REQUEST_NO_VALUE withInt:RxInternalProducersSingleDelayedProducer_HAS_REQUEST_NO_VALUE]) {
        continue;
      }
    }
    else if (s == RxInternalProducersSingleDelayedProducer_NO_REQUEST_HAS_VALUE) {
      if ([self compareAndSetWithInt:RxInternalProducersSingleDelayedProducer_NO_REQUEST_HAS_VALUE withInt:RxInternalProducersSingleDelayedProducer_HAS_REQUEST_HAS_VALUE]) {
        RxInternalProducersSingleDelayedProducer_emitWithRxSubscriber_withId_(child_, value_SingleDelayedProducer_);
      }
    }
    return;
  }
}

- (void)setValueWithId:(id)value {
  for (; ; ) {
    jint s = [self get];
    if (s == RxInternalProducersSingleDelayedProducer_NO_REQUEST_NO_VALUE) {
      self->value_SingleDelayedProducer_ = value;
      if (![self compareAndSetWithInt:RxInternalProducersSingleDelayedProducer_NO_REQUEST_NO_VALUE withInt:RxInternalProducersSingleDelayedProducer_NO_REQUEST_HAS_VALUE]) {
        continue;
      }
    }
    else if (s == RxInternalProducersSingleDelayedProducer_HAS_REQUEST_NO_VALUE) {
      if ([self compareAndSetWithInt:RxInternalProducersSingleDelayedProducer_HAS_REQUEST_NO_VALUE withInt:RxInternalProducersSingleDelayedProducer_HAS_REQUEST_HAS_VALUE]) {
        RxInternalProducersSingleDelayedProducer_emitWithRxSubscriber_withId_(child_, value);
      }
    }
    return;
  }
}

+ (void)emitWithRxSubscriber:(RxSubscriber *)c
                      withId:(id)v {
  RxInternalProducersSingleDelayedProducer_emitWithRxSubscriber_withId_(c, v);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithRxSubscriber:", NULL, 0x1, -1, 0, -1, 1, -1, -1 },
    { "requestWithLong:", "V", 0x1, 2, 3, -1, -1, -1, -1 },
    { "setValueWithId:", "V", 0x1, 4, 5, -1, 6, -1, -1 },
    { "emitWithRxSubscriber:withId:", "V", 0xa, 7, 8, -1, 9, -1, -1 },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID", "J", .constantValue.asLong = RxInternalProducersSingleDelayedProducer_serialVersionUID, 0x1a, -1, -1, -1, -1 },
    { "child_", "LRxSubscriber;", .constantValue.asLong = 0, 0x10, -1, -1, 10, -1 },
    { "value_SingleDelayedProducer_", "LNSObject;", .constantValue.asLong = 0, 0x0, 11, -1, 12, -1 },
    { "NO_REQUEST_NO_VALUE", "I", .constantValue.asInt = RxInternalProducersSingleDelayedProducer_NO_REQUEST_NO_VALUE, 0x18, -1, -1, -1, -1 },
    { "NO_REQUEST_HAS_VALUE", "I", .constantValue.asInt = RxInternalProducersSingleDelayedProducer_NO_REQUEST_HAS_VALUE, 0x18, -1, -1, -1, -1 },
    { "HAS_REQUEST_NO_VALUE", "I", .constantValue.asInt = RxInternalProducersSingleDelayedProducer_HAS_REQUEST_NO_VALUE, 0x18, -1, -1, -1, -1 },
    { "HAS_REQUEST_HAS_VALUE", "I", .constantValue.asInt = RxInternalProducersSingleDelayedProducer_HAS_REQUEST_HAS_VALUE, 0x18, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LRxSubscriber;", "(Lrx/Subscriber<-TT;>;)V", "request", "J", "setValue", "LNSObject;", "(TT;)V", "emit", "LRxSubscriber;LNSObject;", "<T:Ljava/lang/Object;>(Lrx/Subscriber<-TT;>;TT;)V", "Lrx/Subscriber<-TT;>;", "value", "TT;", "<T:Ljava/lang/Object;>Ljava/util/concurrent/atomic/AtomicInteger;Lrx/Producer;" };
  static const J2ObjcClassInfo _RxInternalProducersSingleDelayedProducer = { "SingleDelayedProducer", "rx.internal.producers", ptrTable, methods, fields, 7, 0x11, 4, 7, -1, -1, -1, 13, -1 };
  return &_RxInternalProducersSingleDelayedProducer;
}

@end

void RxInternalProducersSingleDelayedProducer_initWithRxSubscriber_(RxInternalProducersSingleDelayedProducer *self, RxSubscriber *child) {
  JavaUtilConcurrentAtomicAtomicInteger_init(self);
  self->child_ = child;
}

RxInternalProducersSingleDelayedProducer *new_RxInternalProducersSingleDelayedProducer_initWithRxSubscriber_(RxSubscriber *child) {
  J2OBJC_NEW_IMPL(RxInternalProducersSingleDelayedProducer, initWithRxSubscriber_, child)
}

RxInternalProducersSingleDelayedProducer *create_RxInternalProducersSingleDelayedProducer_initWithRxSubscriber_(RxSubscriber *child) {
  J2OBJC_CREATE_IMPL(RxInternalProducersSingleDelayedProducer, initWithRxSubscriber_, child)
}

void RxInternalProducersSingleDelayedProducer_emitWithRxSubscriber_withId_(RxSubscriber *c, id v) {
  RxInternalProducersSingleDelayedProducer_initialize();
  if ([((RxSubscriber *) nil_chk(c)) isUnsubscribed]) {
    return;
  }
  @try {
    [c onNextWithId:v];
  }
  @catch (NSException *e) {
    RxExceptionsExceptions_throwOrReportWithNSException_withRxObserver_withId_(e, c, v);
    return;
  }
  if ([c isUnsubscribed]) {
    return;
  }
  [c onCompleted];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalProducersSingleDelayedProducer)
